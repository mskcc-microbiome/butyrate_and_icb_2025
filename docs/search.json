[
  {
    "objectID": "shortbred_analysis_intro.html",
    "href": "shortbred_analysis_intro.html",
    "title": " ShortBRED Analysis.",
    "section": "",
    "text": "ShortBRED is a tool developed by the Huttenhower group for profiling specific protein families of interest using shotgun metagenomic data. Here is an image taken from their paper* explaining the process:\n\nIn this project it was used to profile genes involved in butyrate synthesis using a set of genes identified by Vital et al in their paper Revealing the Bacterial Butyrate Synthesis Pathways by Analyzing (Meta)genomic Data.\nGenes used in this analysis were downloaded from the Integrated Microbial Genomes and Microbiomes database. A fastq file which acted as our ShortBRED database for this analysis is included in the Github repo for this project.\n\n\nTo run the example of this shortBRED code on one of the fastqs from this project:\nNote butyrate_pw_genes_aa_seqs.fa is the fasta file we used to build the ShortBRED marker db. We also provide you with the pre-built marker db: butyrate_pw_genes_markers.fa",
    "crumbs": [
      "Analysis Notes",
      "shortBRED Analysis Butyrate Gene Quantification"
    ]
  },
  {
    "objectID": "shortbred_analysis_intro.html#what-is-shortbred-and-what-did-we-use-it-for",
    "href": "shortbred_analysis_intro.html#what-is-shortbred-and-what-did-we-use-it-for",
    "title": " ShortBRED Analysis.",
    "section": "",
    "text": "ShortBRED is a tool developed by the Huttenhower group for profiling specific protein families of interest using shotgun metagenomic data. Here is an image taken from their paper* explaining the process:\n\nIn this project it was used to profile genes involved in butyrate synthesis using a set of genes identified by Vital et al in their paper Revealing the Bacterial Butyrate Synthesis Pathways by Analyzing (Meta)genomic Data.\nGenes used in this analysis were downloaded from the Integrated Microbial Genomes and Microbiomes database. A fastq file which acted as our ShortBRED database for this analysis is included in the Github repo for this project.\n\n\nTo run the example of this shortBRED code on one of the fastqs from this project:\nNote butyrate_pw_genes_aa_seqs.fa is the fasta file we used to build the ShortBRED marker db. We also provide you with the pre-built marker db: butyrate_pw_genes_markers.fa",
    "crumbs": [
      "Analysis Notes",
      "shortBRED Analysis Butyrate Gene Quantification"
    ]
  },
  {
    "objectID": "shortbred_analysis_intro.html#analysis-setup",
    "href": "shortbred_analysis_intro.html#analysis-setup",
    "title": " ShortBRED Analysis.",
    "section": "Analysis setup:",
    "text": "Analysis setup:\n\nInstall dependencies:\n(Note that we primarily use the SSH links for git clone. The HTTPS git clone commands are also provided in paranthesis)\n\nClone this repo to a machine with your raw data where you plan to do your analysis.\n\ngit clone git@github.com:mskcc-microbiome/butyrate_and_icb_2025.git (git clone https://github.com/mskcc-microbiome/butyrate_and_icb_2025.git)\n\nInstall usearch (just need v6.0.307 or later, we use v 11.0.667):\n\ncurl https://www.drive5.com/downloads/usearch11.0.667_i86linux32.gz --output usearch11.0.667_i86linux32.gz\ngunzip usearch11.0.667_i86linux32.gz\nNote: make sure you change the permissions if needed so that you have the rights to execute this file (chmod u+x usearch11.0.667_i86linux32)\n\nInstall Shortbred\n\ngit clone git@github.com:biobakery/shortbred.git (git clone https://github.com/biobakery/shortbred.git)",
    "crumbs": [
      "Analysis Notes",
      "shortBRED Analysis Butyrate Gene Quantification"
    ]
  },
  {
    "objectID": "shortbred_analysis_intro.html#analysis-options",
    "href": "shortbred_analysis_intro.html#analysis-options",
    "title": " ShortBRED Analysis.",
    "section": "Analysis Options:",
    "text": "Analysis Options:\n\nBash script (easiest to get up and going):\n\nSet up Environment:\nFirst create and activate an environment with the correct installed packages:\nFrom the base dir of this repo:\nmamba env create -n shortbred_env -f data_processing/shortbred_analysis/envs/shortbred_env.yaml \nmamba activate shortbred_env\nMake sure this env is activated whenever you run this shortbred analysis!\n\n\nUpdate Config\nNow open data_processing/shortbred_analysis/config_params.sh and edit the following variables:\n\nUSEARCH - this should be the path to usearch that you installed in Analysis setup\nMARKER_FASTQ - this is the marker fastq we supplied for this analysis! Location: data_processing/shortbred_analysis/butyrate_pw_genes_markers.fa\nQUANTIFY_SCRIPT - the path to the shortbred_quantify.py script in your Shortbred installation.\n\n\n\nTest Run (recommended)\nSave data_processing/shortbred_analysis/shortbred_template.sh with a new name ie cp data_processing/shortbred_analysis/shortbred_template.sh data_processing/shortbred_analysis/shortbred_test_run.sh.\nEdit the header to add job specific details (note we use LSF headers, please update to whatever submission manager you use!)\n\n#BSUB -J -&gt; #BSUB -J test_shortbred_run\n#BSUB -o -&gt; #BSUB -o test_shortbred_run.stdout\n#BSUB -eo -&gt; #BSUB -eo test_shortbred_run.stderr\n#BSUB -n -&gt; #BSUB -n 1 (for example, can do more than this too, and set the threads parameter below to match.)\n\nManually edit the following parameters:\n\ninput: the fastq.gz file you are running your analysis on.\noutput: desired output file. ie: {$sample_name}_butyrate.txt”.\ntmp_dir: name of a temporary directory this analysis can use while running. (ie {$sample_name}_shortbred_tmp)\nthreads: treads used in test (can default to 1 if needed).\n\nsubmit the job!\nsh data_processing/shortbred_analysis/shortbred_test_run.sh or if submitting as a LSF job: bsub &lt; data_processing/shortbred_analysis/shortbred_test_run.sh.\n\n\nSubmit a list of jobs:\nGiven a folder of fastq.gz files, run a job to submit the shortbred analysis on all of them. We wrote an example script for doing this here:\ndata_processing/shortbred_analysis/shortbred_run_on_folder_example.sh\nYou may need to modify this for your exact use case.\nTo run it, modify the dir\n\n\n\nSnakemake:\nUsing the Snakefile in this folder you should be able to run this file locally or on an HPC. If you use LSF we have a Snakemake profile you can use for submissions.\nShortBRED has the following environmental requirements: - Python 2.7.9 - Biopython v1.65 - ncbi-blast-2.2.28+ - usearch v6.0.307 (Please make sure this is up to date. Earlier versions of usearch use a different command for making database than what is expected by ShortBRED.) - MUSCLE v3.8.31 - CD-HIT version 4.6\nThese environmental requirements are captured in the shortbred_env.yaml file used by the Snakefile for ShortBRED analysis.\nOur analysis currently assumes a structure where each sample has a directory containing R1 and R2 as fastq.gz files. The sample_dir and sample name will be provided as dynamic entries to the config.\nYou will also need to update the config file for the snakemake workflow for the following parameters: - quantify_script: (the path to the shortBRED quantify_script) - marker_fastq: (path to the marker fastq we provided (or updated marker.fastq if using your own reference)). - usearch: the path to your usearch installation.\n\nTest files:\n\nDownload a test file, ie: one of the fastqs from our paper\n\n\n\nCitations:\n\nKaminski J, Gibson MK, Franzosa EA, Segata N, Dantas G, Huttenhower C (2015) High-Specificity Targeted Functional Profiling in Microbial Communities with ShortBRED. PLoS Comput Biol 11(12): e1004557.",
    "crumbs": [
      "Analysis Notes",
      "shortBRED Analysis Butyrate Gene Quantification"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Butyrate, the Microbiome and ICB Therapy",
    "section": "",
    "text": "This site is dedicated to the corresponding manuscript: “Dietary fiber intake and gut microbial fiber fermentation capacity are associated with favorable clinical outcomes following immune checkpoint blockade”\nThis is a Quarto website.\nTo learn more about Quarto websites visit https://quarto.org/docs/websites."
  },
  {
    "objectID": "figure_1_hazard_ratio_fiber.html",
    "href": "figure_1_hazard_ratio_fiber.html",
    "title": " Figure 1 - Hazard Ratio Analysis of Fiber Intake",
    "section": "",
    "text": "The data we are visualizing here has the following structure:",
    "crumbs": [
      "Main Figures",
      "Figure 1: Hazard Ratio with Fiber"
    ]
  },
  {
    "objectID": "figure_1_hazard_ratio_fiber.html#panel-b",
    "href": "figure_1_hazard_ratio_fiber.html#panel-b",
    "title": " Figure 1 - Hazard Ratio Analysis of Fiber Intake",
    "section": "Panel B",
    "text": "Panel B\nMortality Hazard for PFS by daily average fiber intake, visualized via partial smoothing spline. Ticks along the x axis represent individual patients.\n\nmakeSpline(all_metadata_fiber, all_metadata_fiber$pfs_mo, all_metadata_fiber$pod_status, \n           all_metadata_fiber$aofib,\n           xlab = \"Daily average fiber intake (g/day)\", ylab=\"Hazard ratio (95% CI)\",\n           title=\"Smoothing spline for progression-free survival\",\n           knots=2,\n           centerpoint = 15)+\n  scale_x_log10()",
    "crumbs": [
      "Main Figures",
      "Figure 1: Hazard Ratio with Fiber"
    ]
  },
  {
    "objectID": "figure_1_hazard_ratio_fiber.html#panel-c",
    "href": "figure_1_hazard_ratio_fiber.html#panel-c",
    "title": " Figure 1 - Hazard Ratio Analysis of Fiber Intake",
    "section": "Panel C",
    "text": "Panel C\nMortality Hazard for OS by daily average fiber intake, visualized via partial smoothing spline. Ticks along the x axis represent individual patients.\n\nmakeSpline(all_metadata_fiber, all_metadata_fiber$os_mo, all_metadata_fiber$os_status, \n           all_metadata_fiber$aofib,\n           xlab = \"Daily average fiber intake (g/day)\", ylab=\"Hazard ratio (95% CI)\",\n           title=\"Smoothing spline for overall survival\",\n           knots=2, \n           centerpoint = 15) +\n  scale_x_log10()",
    "crumbs": [
      "Main Figures",
      "Figure 1: Hazard Ratio with Fiber"
    ]
  },
  {
    "objectID": "figure_1_hazard_ratio_fiber.html#panel-d",
    "href": "figure_1_hazard_ratio_fiber.html#panel-d",
    "title": " Figure 1 - Hazard Ratio Analysis of Fiber Intake",
    "section": "Panel D",
    "text": "Panel D\nKaplan-Meier PFS by daily average fiber intake, two groups &gt;= 15 grams/day.\n\nkmPFS&lt;-survfit(Surv(pfs_mo, pod_status)~fiber_dichotomized,\n               type=\"kaplan-meier\", data=all_metadata_fiber)\n\nggsurvplot(kmPFS,risk.table=TRUE,\n           xlab=\"Time (months)\", \n           ylab=\"Progression-free survival\",\n           pval = TRUE,\n           legend=c(0.8,0.9),\n           title=\"Patients with urothelial or renal cell cancer on ICB\",\n           legend.title=\"Fiber intake\",\n           legend.labs=c(\"&lt;15 g/day\",\"15+ g/day\"),\n           #surv.median.line = \"hv\",\n           conf.int=TRUE,\n           break.x.by=6,\n           axes.offset=FALSE,\n           xlim=c(0,25),\n           data = all_metadata_fiber)",
    "crumbs": [
      "Main Figures",
      "Figure 1: Hazard Ratio with Fiber"
    ]
  },
  {
    "objectID": "figure_1_hazard_ratio_fiber.html#panel-e",
    "href": "figure_1_hazard_ratio_fiber.html#panel-e",
    "title": " Figure 1 - Hazard Ratio Analysis of Fiber Intake",
    "section": "Panel E",
    "text": "Panel E\nKaplan-Meier OS by daily average fiber intake, two groups &gt;= 15 grams/day.\n\nkmOS&lt;-survfit(Surv(os_mo, os_status)~fiber_dichotomized,\n              type=\"kaplan-meier\", data=all_metadata_fiber)\n\nggsurvplot(kmOS,risk.table=TRUE,\n           xlab=\"Time (months)\", \n           ylab=\"Overall survival\",\n           pval = TRUE,\n           legend=\"none\",\n           title=\"Patients with urothelial or renal cell cancer on ICB\",\n           legend.title=\"Fiber intake\",\n           legend.labs=c(\"&lt;15 g/day\",\"15+ g/day\"),\n           #surv.median.line = \"hv\",\n           conf.int=TRUE,\n           break.x.by=6,\n           axes.offset=FALSE,\n           xlim=c(0,25),\n           data = all_metadata_fiber)",
    "crumbs": [
      "Main Figures",
      "Figure 1: Hazard Ratio with Fiber"
    ]
  },
  {
    "objectID": "figure_1_hazard_ratio_fiber.html#panel-f",
    "href": "figure_1_hazard_ratio_fiber.html#panel-f",
    "title": " Figure 1 - Hazard Ratio Analysis of Fiber Intake",
    "section": "Panel F",
    "text": "Panel F\nUnivariate HRs for PFS among clinically relavant subgroups.\n\ncox_pfs_all_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized,\n                    all_metadata_fiber)\nsummary(cox_pfs_all_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized, \n    data = all_metadata_fiber)\n\n  n= 86, number of events= 55 \n\n                      coef exp(coef) se(coef)      z Pr(&gt;|z|)   \nfiber_dichotomized -0.8011    0.4488   0.2780 -2.882  0.00395 **\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.4488      2.228    0.2603    0.7739\n\nConcordance= 0.606  (se = 0.033 )\nLikelihood ratio test= 7.82  on 1 df,   p=0.005\nWald test            = 8.31  on 1 df,   p=0.004\nScore (logrank) test = 8.74  on 1 df,   p=0.003\n\ncox_pfs_RC &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized,\n                   mRCdataFiber)\nsummary(cox_pfs_RC)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized, \n    data = mRCdataFiber)\n\n  n= 48, number of events= 28 \n\n                      coef exp(coef) se(coef)      z Pr(&gt;|z|)   \nfiber_dichotomized -1.0541    0.3485   0.3945 -2.672  0.00754 **\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.3485      2.869    0.1608    0.7551\n\nConcordance= 0.641  (se = 0.046 )\nLikelihood ratio test= 6.46  on 1 df,   p=0.01\nWald test            = 7.14  on 1 df,   p=0.008\nScore (logrank) test = 7.8  on 1 df,   p=0.005\n\ncox_pfs_RC_IpiNivo &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized,\n                           dataRCIpiNivoFiber)\nsummary(cox_pfs_RC_IpiNivo)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized, \n    data = dataRCIpiNivoFiber)\n\n  n= 15, number of events= 8 \n\n                      coef exp(coef) se(coef)      z Pr(&gt;|z|)\nfiber_dichotomized -0.7864    0.4555   0.7387 -1.065    0.287\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.4555      2.196    0.1071     1.937\n\nConcordance= 0.627  (se = 0.094 )\nLikelihood ratio test= 1.04  on 1 df,   p=0.3\nWald test            = 1.13  on 1 df,   p=0.3\nScore (logrank) test = 1.19  on 1 df,   p=0.3\n\ncox_pfs_RC_TKI_IO &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized,\n                          dataRCioTKIFiber)\nsummary(cox_pfs_RC_TKI_IO)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized, \n    data = dataRCioTKIFiber)\n\n  n= 24, number of events= 12 \n\n                      coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized -1.1926    0.3034   0.6183 -1.929   0.0538 .\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.3034      3.295   0.09031      1.02\n\nConcordance= 0.635  (se = 0.073 )\nLikelihood ratio test= 3.16  on 1 df,   p=0.08\nWald test            = 3.72  on 1 df,   p=0.05\nScore (logrank) test = 4.17  on 1 df,   p=0.04\n\ncox_pfs_UC &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized,\n                           mUCdataFiber)\nsummary(cox_pfs_UC)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized, \n    data = mUCdataFiber)\n\n  n= 38, number of events= 27 \n\n                      coef exp(coef) se(coef)      z Pr(&gt;|z|)\nfiber_dichotomized -0.3084    0.7346   0.3919 -0.787    0.431\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.7346      1.361    0.3408     1.584\n\nConcordance= 0.53  (se = 0.052 )\nLikelihood ratio test= 0.61  on 1 df,   p=0.4\nWald test            = 0.62  on 1 df,   p=0.4\nScore (logrank) test = 0.62  on 1 df,   p=0.4\n\ncox_pfs_UC_NOTavelumab &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized,\n                   dataUC_NOTavelumabFiber)\nsummary(cox_pfs_UC_NOTavelumab)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized, \n    data = dataUC_NOTavelumabFiber)\n\n  n= 24, number of events= 19 \n\n                       coef exp(coef) se(coef)      z Pr(&gt;|z|)\nfiber_dichotomized -0.03016   0.97029  0.46269 -0.065    0.948\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.9703      1.031    0.3918     2.403\n\nConcordance= 0.473  (se = 0.07 )\nLikelihood ratio test= 0  on 1 df,   p=0.9\nWald test            = 0  on 1 df,   p=0.9\nScore (logrank) test = 0  on 1 df,   p=0.9\n\ncox_pfs_UC_avelumab &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized,\n                            dataUCavelumabFiber)\nsummary(cox_pfs_UC_avelumab)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized, \n    data = dataUCavelumabFiber)\n\n  n= 14, number of events= 8 \n\n                      coef exp(coef) se(coef)      z Pr(&gt;|z|)\nfiber_dichotomized -0.1060    0.8994   0.8239 -0.129    0.898\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.8994      1.112    0.1789     4.521\n\nConcordance= 0.527  (se = 0.091 )\nLikelihood ratio test= 0.02  on 1 df,   p=0.9\nWald test            = 0.02  on 1 df,   p=0.9\nScore (logrank) test = 0.02  on 1 df,   p=0.9\n\nforestplot_data &lt;- tibble::tibble(mean  = c(0.4488,0.3485, 0.4555, 0.3034, 0.7346, 0.97029, 0.8994),\n                            lower = c(0.26032,0.1608, 0.1071, 0.09031, 0.3408, 0.3918, 0.1789),\n                            upper = c( 0.7739,0.7551, 1.937, 1.02, 1.584, 2.403, 4.521),\n                            study = c(\"All\",\"RCC\", \"RCC ipi-nivo\", \"RCC TKI-ICB\",\n                                      \"UC\", \"UC non-maintenance ICB\", \"UC maintenance ICB\"),\n                            n = c(\"86\",\"48\",\"15\",\"24\",\"38\",\"24\",\"14\"),\n                            events = c(\"55\",\"28\",\"8\",\"12\",\"27\",\"19\",\"8\"),\n                            HR = c(\"0.45\",\"0.35\", \"0.46\", \"0.30\", \"0.73\", \"0.97\", \"0.90\"))\n\nforestplot_data |&gt;\n  forestplot(labeltext = c(study, n, events, HR),\n             clip = c(0.09, 2.5),\n             xlog = TRUE,\n             xlab = \"Hazard ratio for PFS (95% CI)\",\n             xticks = c(0.1,0.25,0.5,1.0,2.5),\n             title = \"Univariable progression-free survival subgroup analyis\") |&gt;\n  fp_set_style(box = \"royalblue\",\n               line = \"darkblue\",\n               summary = \"royalblue\") |&gt; \n  fp_add_header(study = c(\"Subgroup\"),\n                n = c(\"n\"),\n                events = c(\"Events\"),\n                HR = c(\"HR\"))",
    "crumbs": [
      "Main Figures",
      "Figure 1: Hazard Ratio with Fiber"
    ]
  },
  {
    "objectID": "figure_1_hazard_ratio_fiber.html#panel-g",
    "href": "figure_1_hazard_ratio_fiber.html#panel-g",
    "title": " Figure 1 - Hazard Ratio Analysis of Fiber Intake",
    "section": "Panel G",
    "text": "Panel G\nMultivariate HR for PFS adjusted for age, diagnosis, and performance status.\n\ncox_pfs_all &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized + ageby10 + \n                      ecog_1to5_final + cancer_RCCvsUC_NAME + stage.simplified.factor,\n                   all_metadata_fiber)\nsummary(cox_pfs_all)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC_NAME + stage.simplified.factor, \n    data = all_metadata_fiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)   \nfiber_dichotomized              -0.7851    0.4561   0.2946 -2.665   0.0077 **\nageby10                          0.3098    1.3631   0.1463  2.118   0.0342 * \necog_1to5_final                  0.3067    1.3589   0.3375  0.909   0.3635   \ncancer_RCCvsUC_NAMEUC            0.4615    1.5864   0.2986  1.546   0.1222   \nstage.simplified.factorStage IV  0.3596    1.4327   1.0407  0.346   0.7297   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized                 0.4561     2.1925    0.2560    0.8125\nageby10                            1.3631     0.7336    1.0233    1.8157\necog_1to5_final                    1.3589     0.7359    0.7013    2.6332\ncancer_RCCvsUC_NAMEUC              1.5864     0.6303    0.8836    2.8482\nstage.simplified.factorStage IV    1.4327     0.6980    0.1864   11.0150\n\nConcordance= 0.675  (se = 0.036 )\nLikelihood ratio test= 19.37  on 5 df,   p=0.002\nWald test            = 19.17  on 5 df,   p=0.002\nScore (logrank) test = 20.29  on 5 df,   p=0.001\n\ncox_pfs_RC &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized + ageby10 + ecog_1to5_final,\n                   mRCdataFiber) #could not adjust for stage because all patients with RCC were stage IV\nsummary(cox_pfs_RC)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized + \n    ageby10 + ecog_1to5_final, data = mRCdataFiber)\n\n  n= 48, number of events= 28 \n\n                      coef exp(coef) se(coef)      z Pr(&gt;|z|)   \nfiber_dichotomized -1.1441    0.3185   0.4488 -2.549  0.01079 * \nageby10             0.5361    1.7093   0.2011  2.666  0.00769 **\necog_1to5_final     0.5315    1.7015   0.4766  1.115  0.26483   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.3185     3.1396    0.1322    0.7676\nageby10               1.7093     0.5850    1.1525    2.5352\necog_1to5_final       1.7015     0.5877    0.6685    4.3306\n\nConcordance= 0.727  (se = 0.048 )\nLikelihood ratio test= 15.03  on 3 df,   p=0.002\nWald test            = 15.1  on 3 df,   p=0.002\nScore (logrank) test = 16.22  on 3 df,   p=0.001\n\ncox_pfs_UC &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized+ ageby10 + ecog_1to5_final + stage.simplified.factor,\n                   mUCdataFiber)\nsummary(cox_pfs_UC)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized + \n    ageby10 + ecog_1to5_final + stage.simplified.factor, data = mUCdataFiber)\n\n  n= 38, number of events= 27 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)\nfiber_dichotomized              -0.3016    0.7397   0.4143 -0.728    0.467\nageby10                          0.1800    1.1973   0.1998  0.901    0.367\necog_1to5_final                 -0.2445    0.7831   0.5621 -0.435    0.664\nstage.simplified.factorStage IV  0.8216    2.2742   1.1013  0.746    0.456\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized                 0.7397     1.3520    0.3284     1.666\nageby10                            1.1973     0.8352    0.8094     1.771\necog_1to5_final                    0.7831     1.2770    0.2603     2.356\nstage.simplified.factorStage IV    2.2742     0.4397    0.2627    19.689\n\nConcordance= 0.551  (se = 0.07 )\nLikelihood ratio test= 1.97  on 4 df,   p=0.7\nWald test            = 1.83  on 4 df,   p=0.8\nScore (logrank) test = 1.86  on 4 df,   p=0.8\n\nforestplot_data &lt;- tibble::tibble(mean  = c(0.4561, 0.3185, 0.7397),\n                                  lower = c(0.2560, 0.1322, 0.3284),\n                                  upper = c(0.8125, 0.7676, 1.666),\n                                  study = c(\"All\", \"RCC\", \"UC\"),\n                                  n = c(\"86\",\"48\",\"38\"),\n                                  events = c(\"55\",\"28\",\"27\"),\n                                  HR = c(\"0.46\",\"0.32\",\"0.74\"))\n\nforestplot_data |&gt;\n  forestplot(labeltext = c(study, n, events, HR),\n             clip = c(0.09, 2.5),\n             xlog = TRUE,\n             xlab = \"Hazard ratio for PFS (95% CI)\",\n             xticks = c(0.1,0.25,0.5,1.0,2.5),\n             title = \"Multivariable progression-free survival subgroup analyis\") |&gt;\n  fp_set_style(box = \"royalblue\",\n               line = \"darkblue\",\n               summary = \"royalblue\") |&gt; \n  fp_add_header(study = c(\"Subgroup\"),\n                n = c(\"n\"),\n                events = c(\"Events\"),\n                HR = c(\"HR\"))",
    "crumbs": [
      "Main Figures",
      "Figure 1: Hazard Ratio with Fiber"
    ]
  },
  {
    "objectID": "extended_data_figure_6_acoa_pathway_butyrate.html",
    "href": "extended_data_figure_6_acoa_pathway_butyrate.html",
    "title": "Extended Figure 6 ACOA and Butyrate",
    "section": "",
    "text": "Panel A\nAcetyle CoA Gene abundance and butyric acid relationship\n\nmetabolomics_db &lt;- readRDS(\"../data/cleaned_data/metabolomics_data.rds\")\n\nggplot(metabolomics_db) +\n  geom_smooth(aes(x=log(pyruvate), y=Butyric.acid), method=lm, color=\"#e05f5f\") +\n  geom_point(aes(x=log(pyruvate), y=Butyric.acid),\n             shape=21, size=3, fill=\"#e05f5f\", alpha=0.8) +\n  theme_classic()\n\n\n\n\n\n\n\ncor.test(metabolomics_db$Butyric.acid, log(metabolomics_db$pyruvate))\n\n\n    Pearson's product-moment correlation\n\ndata:  metabolomics_db$Butyric.acid and log(metabolomics_db$pyruvate)\nt = 2.3571, df = 62, p-value = 0.02159\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.04407955 0.49751891\nsample estimates:\n      cor \n0.2867815",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 6: ACOA Pathway Breakdown - Butyrate"
    ]
  },
  {
    "objectID": "extended_data_figure_4_acoa_pathway_family_associations_continued.html",
    "href": "extended_data_figure_4_acoa_pathway_family_associations_continued.html",
    "title": "Extended Figure 4 deeper dive into relationship between ACOA pathway abundance and microbiome taxonomy.",
    "section": "",
    "text": "Relationship between relative abundance of top families and Acetyl-CoA pathway abundance",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 4: Deeper Look at ACOA genes and taxonomy"
    ]
  },
  {
    "objectID": "extended_data_figure_4_acoa_pathway_family_associations_continued.html#panel-a",
    "href": "extended_data_figure_4_acoa_pathway_family_associations_continued.html#panel-a",
    "title": "Extended Figure 4 deeper dive into relationship between ACOA pathway abundance and microbiome taxonomy.",
    "section": "Panel A",
    "text": "Panel A\nRelationship between Rel Abundance of Lachnospiraceae and Acetyle-CoA pathway abundance.\n\nplotting_ps %&gt;%\n  filter(grepl(\"Lachnospiraceae\", Family)) %&gt;%\n  ggplot() +\n  geom_smooth(aes(x=acoa, y=Abundance), method=lm, color=\"steelblue\") +\n  geom_point(aes(x=acoa, y=Abundance),\n             shape=21, size=3, fill=\"steelblue\", alpha=0.8) +\n  theme_classic() + \n  labs(\n    x = \"Acetyl-CoA pathway gene abundance (RPKM)\",\n    y = \"Lachnospiraceae\"\n  )\n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_4_part_a_Lachnospiraceae.svg\", w=5, h = 5)\n\n\n#|warning: false\n#|label: p_value_panel_a\nfit &lt;- lm(Abundance ~ acoa, plotting_ps %&gt;%\n  filter(grepl(\"Lachnospiraceae\", Family)))\nsummary(fit)\n\n\nCall:\nlm(formula = Abundance ~ acoa, data = plotting_ps %&gt;% filter(grepl(\"Lachnospiraceae\", \n    Family)))\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-9.982 -4.407 -1.105  2.090 37.986 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 8.418826   1.232703   6.830 2.17e-10 ***\nacoa        0.011170   0.001998   5.589 1.10e-07 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 6.725 on 145 degrees of freedom\nMultiple R-squared:  0.1773,    Adjusted R-squared:  0.1716 \nF-statistic: 31.24 on 1 and 145 DF,  p-value: 1.096e-07",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 4: Deeper Look at ACOA genes and taxonomy"
    ]
  },
  {
    "objectID": "extended_data_figure_4_acoa_pathway_family_associations_continued.html#panel-b",
    "href": "extended_data_figure_4_acoa_pathway_family_associations_continued.html#panel-b",
    "title": "Extended Figure 4 deeper dive into relationship between ACOA pathway abundance and microbiome taxonomy.",
    "section": "Panel B",
    "text": "Panel B\nRelationship between Rel Abundance of Ruminococcacae and Acetyle-CoA pathway abundance.\n\nplotting_ps %&gt;%\n  filter(grepl(\"Ruminococcaceae\", Family)) %&gt;%\n  ggplot() +\n  geom_smooth(aes(x=acoa, y=Abundance), method=lm, color=\"goldenrod\") +\n  geom_point(aes(x=acoa, y=Abundance),\n             shape=21, size=3, fill=\"goldenrod\", alpha=0.8) +\n  theme_classic() + \n  labs(\n    x = \"Acetyl-CoA pathway gene abundance (RPKM)\",\n    y = \"Ruminococcaceae\"\n  )\n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_4_part_b_Ruminococcaceae.svg\", w=5, h = 5)\n\n\n#|warning: false\n#|label: p_value_panel_b\nfit &lt;- lm(Abundance ~ acoa, plotting_ps %&gt;%\n  filter(grepl(\"Ruminococcaceae\", Family)))\nsummary(fit)\n\n\nCall:\nlm(formula = Abundance ~ acoa, data = plotting_ps %&gt;% filter(grepl(\"Ruminococcaceae\", \n    Family)))\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-17.1756  -5.2271  -0.5834   4.2678  18.3653 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 6.310352   1.285751   4.908 2.45e-06 ***\nacoa        0.013612   0.002084   6.530 1.04e-09 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 7.014 on 145 degrees of freedom\nMultiple R-squared:  0.2272,    Adjusted R-squared:  0.2219 \nF-statistic: 42.64 on 1 and 145 DF,  p-value: 1.037e-09",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 4: Deeper Look at ACOA genes and taxonomy"
    ]
  },
  {
    "objectID": "extended_data_figure_4_acoa_pathway_family_associations_continued.html#panel-c",
    "href": "extended_data_figure_4_acoa_pathway_family_associations_continued.html#panel-c",
    "title": "Extended Figure 4 deeper dive into relationship between ACOA pathway abundance and microbiome taxonomy.",
    "section": "Panel C",
    "text": "Panel C\nRelationship between Rel Abundance of Ruminococcacae and Acetyle-CoA pathway abundance.\n\nplotting_ps %&gt;%\n  filter(grepl(\"Bacteroidaceae\", Family)) %&gt;%\n  ggplot() +\n  geom_smooth(aes(x=acoa, y=Abundance), method=lm, color=\"firebrick2\") +\n  geom_point(aes(x=acoa, y=Abundance),\n             shape=21, size=3, fill=\"firebrick2\", alpha=0.8) +\n  theme_classic() + \n  labs(\n    x = \"Acetyl-CoA pathway gene abundance (RPKM)\",\n    y = \"Bacteroidaceae\"\n  )\n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_4_part_c_Bacteroidaceae.svg\", w=5, h = 5)\n\n\n#|warning: false\n#|label: p_value_panel_c\nfit &lt;- lm(Abundance ~ acoa, plotting_ps %&gt;%\n  filter(grepl(\"Bacteroidaceae\", Family)))\nsummary(fit)\n\n\nCall:\nlm(formula = Abundance ~ acoa, data = plotting_ps %&gt;% filter(grepl(\"Bacteroidaceae\", \n    Family)))\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-25.059  -7.357  -1.563   5.631  32.901 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 26.589662   1.891717   14.06  &lt; 2e-16 ***\nacoa        -0.020394   0.003067   -6.65 5.58e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 10.32 on 145 degrees of freedom\nMultiple R-squared:  0.2337,    Adjusted R-squared:  0.2284 \nF-statistic: 44.22 on 1 and 145 DF,  p-value: 5.577e-10",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 4: Deeper Look at ACOA genes and taxonomy"
    ]
  },
  {
    "objectID": "extended_data_figure_2_butyrate_genes_overall_survival.html",
    "href": "extended_data_figure_2_butyrate_genes_overall_survival.html",
    "title": "Extended Figure 2 Gene Abundance and Hazard Ration, and Univatiate Analysis of Butyrate Pathway.",
    "section": "",
    "text": "[1] \"blinded_subject_id\"    \"id_int\"                \"cohort\"               \n [4] \"age\"                   \"impact_tmb_score\"      \"cpb_drug\"             \n [7] \"ecog\"                  \"best_overall_response\" \"tt_pfs_d\"             \n[10] \"pfs_event\"             \"tt_os_d\"               \"event_os\"             \n[13] \"TMPT\"                  \"WMS_SGPID\"             \"SAMPID\"               \n[16] \"total\"                 \"samp_id\"               \"identifier.y\"         \n[19] \"Shannon\"               \"tx\"                    \"age10\"                \n[22] \"med_buty\"              \"fouraminobutyrate\"     \"gluatarate\"           \n[25] \"lysine\"                \"pyruvate\"             \n\n\n\nPanel A\nHazard Ratio of Overall Survival Evaluated with respect to Butyrate production gene RPKM.\n\nos_butyrate &lt;-  coxph(Surv(tt_os_d, event_os)~rms::rcs(total,4)+age10+factor(cohort)+ecog,, data = acoa_df)\nptemp &lt;- termplot(os_butyrate, se=T, plot=F)\nbuterm &lt;- ptemp$total\ncenter &lt;- buterm$y[which(buterm$y == median(buterm$y))]\nytemp &lt;- buterm$y + outer(buterm$se, c(0, -1.96, 1.96), '*')\nexp_ytemp &lt;- exp(ytemp - center)\n\nspline_data &lt;- data.frame(buty = buterm$x, Estimate = exp_ytemp[,1],\n                          Lower = exp_ytemp[,2], Upper = exp_ytemp[,3])\n\nggplot(spline_data, aes(x = buty)) +\n  geom_ribbon(aes(ymin = Lower, ymax = Upper), fill = \"grey80\", alpha = 0.5) +\n  geom_line(aes(y = Estimate), color = \"blue\") +\n  geom_rug(sides = \"b\") +  # Add rug plot at the bottom ('b') of the plot\n  scale_y_log10() +  # Log scale for y-axis\n  labs(x = \"Total butyrate-pathway genes present\", y = \"Hazard ratio\") +\n  theme_minimal() +\n theme(\n     axis.text = element_text(size = 24), # Adjust axis labels\n     axis.title = element_text(size = 24), # Adjust axis titles\n     plot.title = element_text(size = 24),  # Adjust plot title\n     legend.text = element_text(size = 18),  # Adjust legend text\n     legend.title = element_text(size = 20), # Adjust legend titleMetronidazole\n     strip.text.x = element_text(size = 20),\n     strip.text.y = element_text(size = 20)\n ) \n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_2_part_a_HR_tot_butyrate.svg\", w = 6.5, h = 4)  \n\n\n\nPanel B\nUnivariate model of OS as a function of total butyrate genes, and each major sub-pathway in the butyrate production gene pathways.\n\nuniv2 &lt;- function(cox, k=1, l=1){\n  coef &lt;- exp(coef(cox))\n  confint &lt;- exp(confint(cox))\n  p &lt;- summary(cox)$coefficients[,5]\n  out &lt;- data.frame(\"HR\"=round(coef,4), round(confint,4), \"p\"=round(p,9))\n  q &lt;- nrow(out)\n  if(l== -1){out &lt;- out[q,]\n  }else{out &lt;- out[k:l,]}\n  return(out)\n\n}\n\nforest_os &lt;- rbind(\nuniv2(coxph(Surv(tt_os_d, event_os)~log(total)+age10+cohort+ecog, acoa_df)),\nuniv2(coxph(Surv(tt_os_d, event_os)~log(pyruvate)+age10+cohort+ecog, acoa_df)),\nuniv2(coxph(Surv(tt_os_d, event_os)~log(lysine+0.0000001)+age10+cohort+ecog, acoa_df)),\nuniv2(coxph(Surv(tt_os_d, event_os)~log(fouraminobutyrate+0.000001)+age10+cohort+ecog, acoa_df)),\nuniv2(coxph(Surv(tt_os_d, event_os)~log(gluatarate+0.000001)+age10+cohort+ecog, acoa_df)))\n\nforest_os %&gt;%\n  rename_with(~ c(\"HR\", \"CI_low\", \"CI_high\", \"p\"), .cols = everything()) %&gt;%\n  rownames_to_column(\"scfa\") %&gt;%\n  ggplot() +\n  geom_vline(xintercept=1, lty=2, size=0.25)+\n  geom_point(aes(x=HR, y=fct_reorder(scfa, HR, .desc = T)))+\n  geom_linerange(aes(xmin=CI_low, xmax=CI_high, y=fct_reorder(scfa, HR)), size=0.5) +\n  scale_x_continuous(transform = \"log\", breaks=round(exp(seq(-2,1.5,0.5)),1)) +\n  theme_classic() +\n  coord_cartesian(xlim=exp(c(-2, 0.3))) + \n  labs(y = \"\") +\n theme(\n     axis.text = element_text(size = 20), # Adjust axis labels\n     axis.title = element_text(size = 20), # Adjust axis titles\n     plot.title = element_text(size = 20),  # Adjust plot title\n     legend.text = element_text(size = 18),  # Adjust legend text\n     legend.title = element_text(size = 18), # Adjust legend titleMetronidazole\n     strip.text.x = element_text(size = 18),\n     strip.text.y = element_text(size = 18)\n ) + \ntheme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_2_part_b_forest_plt.svg\", w = 6.5, h = 4)",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 2: Butyrate Genes and OS"
    ]
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "extended_data_figure_1_pfs_fiber_disease_type.html",
    "href": "extended_data_figure_1_pfs_fiber_disease_type.html",
    "title": "Extended Figure 1: PFS vs Fiber by Disease Type",
    "section": "",
    "text": "The data we are visualizing here has the following structure:",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 1: PFS and OS by Disease Type"
    ]
  },
  {
    "objectID": "extended_data_figure_1_pfs_fiber_disease_type.html#panel-a",
    "href": "extended_data_figure_1_pfs_fiber_disease_type.html#panel-a",
    "title": "Extended Figure 1: PFS vs Fiber by Disease Type",
    "section": "Panel A",
    "text": "Panel A\nMortality Hazard for PFS by daily average fiber intake, visualized via partial smoothing spline for pateints with Renal Cell Cancer. Ticks along the x axis represent individual patients.\n\ncox_pfs_allMet_mv &lt;-coxph(Surv(pfs_mo,\n                               pod_status)~ fiber_dichotomized + \n                            ageby10 + \n                            ecog_1to5_final +\n                            cancer_RCCvsUC_NAME,\n                          all_metadata_fiber)\n\nsummary(cox_pfs_allMet_mv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC_NAME, data = all_metadata_fiber)\n\n  n= 86, number of events= 55 \n\n                         coef exp(coef) se(coef)      z Pr(&gt;|z|)   \nfiber_dichotomized    -0.7908    0.4535   0.2948 -2.683   0.0073 **\nageby10                0.3109    1.3646   0.1466  2.121   0.0339 * \necog_1to5_final        0.3307    1.3919   0.3316  0.997   0.3187   \ncancer_RCCvsUC_NAMEUC  0.4401    1.5528   0.2929  1.503   0.1330   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                      exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized       0.4535     2.2051    0.2545    0.8081\nageby10                  1.3646     0.7328    1.0238    1.8189\necog_1to5_final          1.3919     0.7184    0.7266    2.6662\ncancer_RCCvsUC_NAMEUC    1.5528     0.6440    0.8746    2.7570\n\nConcordance= 0.676  (se = 0.036 )\nLikelihood ratio test= 19.24  on 4 df,   p=7e-04\nWald test            = 18.9  on 4 df,   p=8e-04\nScore (logrank) test = 19.93  on 4 df,   p=5e-04\n\ncox_pfs_allMet_mv2 &lt;-coxph(Surv(pfs_mo,\n                                pod_status)~ fiber_dichotomized + \n                             calor +\n                             ageby10 + \n                             ecog_1to5_final +\n                             cancer_RCCvsUC_NAME,\n                           all_metadata_fiber)\n\nsummary(cox_pfs_allMet_mv2)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized + \n    calor + ageby10 + ecog_1to5_final + cancer_RCCvsUC_NAME, \n    data = all_metadata_fiber)\n\n  n= 86, number of events= 55 \n\n                            coef  exp(coef)   se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized    -0.6706683  0.5113667  0.3710550 -1.807   0.0707 .\ncalor                 -0.0001398  0.9998602  0.0002698 -0.518   0.6042  \nageby10                0.3087635  1.3617403  0.1458934  2.116   0.0343 *\necog_1to5_final        0.3395761  1.4043521  0.3323831  1.022   0.3070  \ncancer_RCCvsUC_NAMEUC  0.4522138  1.5717879  0.2939916  1.538   0.1240  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                      exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized       0.5114     1.9555    0.2471     1.058\ncalor                    0.9999     1.0001    0.9993     1.000\nageby10                  1.3617     0.7344    1.0231     1.813\necog_1to5_final          1.4044     0.7121    0.7321     2.694\ncancer_RCCvsUC_NAMEUC    1.5718     0.6362    0.8834     2.797\n\nConcordance= 0.675  (se = 0.037 )\nLikelihood ratio test= 19.52  on 5 df,   p=0.002\nWald test            = 19.31  on 5 df,   p=0.002\nScore (logrank) test = 20.28  on 5 df,   p=0.001\n\ncox_pfs_allMet_mv3 &lt;-coxph(Surv(pfs_mo,\n                                pod_status)~ fiber_dichotomized + \n                             Impact.TMB.Imputed +\n                             ageby10 + \n                             ecog_1to5_final +\n                             cancer_RCCvsUC_NAME,\n                           all_metadata_fiber)\n\nsummary(cox_pfs_allMet_mv3)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized + \n    Impact.TMB.Imputed + ageby10 + ecog_1to5_final + cancer_RCCvsUC_NAME, \n    data = all_metadata_fiber)\n\n  n= 86, number of events= 55 \n\n                          coef exp(coef) se(coef)      z Pr(&gt;|z|)   \nfiber_dichotomized    -0.79088   0.45345  0.29249 -2.704  0.00685 **\nImpact.TMB.Imputed    -0.07975   0.92335  0.06553 -1.217  0.22362   \nageby10                0.29163   1.33861  0.14658  1.990  0.04664 * \necog_1to5_final        0.19712   1.21789  0.34869  0.565  0.57185   \ncancer_RCCvsUC_NAMEUC  0.73208   2.07941  0.37269  1.964  0.04950 * \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                      exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized       0.4534     2.2053    0.2556    0.8044\nImpact.TMB.Imputed       0.9233     1.0830    0.8121    1.0499\nageby10                  1.3386     0.7470    1.0043    1.7841\necog_1to5_final          1.2179     0.8211    0.6149    2.4122\ncancer_RCCvsUC_NAMEUC    2.0794     0.4809    1.0016    4.3170\n\nConcordance= 0.679  (se = 0.035 )\nLikelihood ratio test= 20.8  on 5 df,   p=9e-04\nWald test            = 21.11  on 5 df,   p=8e-04\nScore (logrank) test = 22.06  on 5 df,   p=5e-04\n\n\n\nkmPFS&lt;-survfit(Surv(pfs_mo, pod_status)~fiber_dichotomized,\n               type=\"kaplan-meier\", data=mRCdataFiber)\n\npfs_rcc &lt;- ggsurvplot(kmPFS,risk.table=TRUE,\n           xlab=\"Time (months)\", \n           ylab=\"Progression-free survival\",\n           pval = TRUE,\n           legend=\"none\",\n           title=\"Patients with renal cell cancer on ICB\",\n           legend.title=\"Fiber intake\",\n           legend.labs=c(\"&lt;15 g/day\",\"15+ g/day\"),\n           #surv.median.line = \"hv\",\n           conf.int=TRUE,\n           break.x.by=6,\n           axes.offset=FALSE,\n           #xlim=c(0,16),\n           data = mRCdataFiber) \nprint(pfs_rcc)\n\n\n\n\n\n\n\n#rcc_plt &lt;- ggsave_workaround(pfs_rcc)\n#ggsave(\"svg/extended_figure_1_part_a_RCC_PFS.svg\", plot =rcc_plt, w=8, h = 5)",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 1: PFS and OS by Disease Type"
    ]
  },
  {
    "objectID": "extended_data_figure_1_pfs_fiber_disease_type.html#panel-b",
    "href": "extended_data_figure_1_pfs_fiber_disease_type.html#panel-b",
    "title": "Extended Figure 1: PFS vs Fiber by Disease Type",
    "section": "Panel B",
    "text": "Panel B\nMortality Hazard for PFS by daily average fiber intake, visualized via partial smoothing spline for pateints with Urothelial Cancer. Ticks along the x axis represent individual patients.\n\n#Extended Data Figure 2\nkmPFS&lt;-survfit(Surv(pfs_mo, pod_status)~fiber_dichotomized,\n               type=\"kaplan-meier\", data=mUCdataFiber)\n\npfs_uc &lt;- ggsurvplot(kmPFS,risk.table=TRUE,\n           xlab=\"Time (months)\", \n           ylab=\"Progression-free survival\",\n           pval = TRUE,\n           legend=\"none\",\n           title=\"Patients with urothelial cancer on ICB\",\n           legend.title=\"Fiber intake\",\n           legend.labs=c(\"&lt;15 g/day\",\"15+ g/day\"),\n           #surv.median.line = \"hv\",\n           conf.int=TRUE,\n           break.x.by=6,\n           axes.offset=FALSE,\n           xlim=c(0,16),\n           data = mUCdataFiber)\nprint(pfs_uc)\n\n\n\n\n\n\n\n#uc_plt &lt;- ggsave_workaround(pfs_uc)\n#ggsave(\"svg/extended_figure_1_part_b_UC_PFS.svg\", plot = uc_plt, w=8, h = 5)",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 1: PFS and OS by Disease Type"
    ]
  },
  {
    "objectID": "extended_data_figure_1_pfs_fiber_disease_type.html#panel-c",
    "href": "extended_data_figure_1_pfs_fiber_disease_type.html#panel-c",
    "title": "Extended Figure 1: PFS vs Fiber by Disease Type",
    "section": "Panel C",
    "text": "Panel C\nMultivariate Model Progression Free Survival Sensitivity Analysis\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_12 = case_when(aofib&gt;=12~1,\n                                                                              aofib&lt;12~0))\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_14 = case_when(aofib&gt;=14~1,\n                                                                              aofib&lt;14~0))\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_16 = case_when(aofib&gt;=16~1,\n                                                                              aofib&lt;16~0))\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_18 = case_when(aofib&gt;=18~1,\n                                                                              aofib&lt;18~0))\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_20 = case_when(aofib&gt;=20~1,\n                                                                              aofib&lt;20~0))\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_22 = case_when(aofib&gt;=22~1,\n                                                                              aofib&lt;22~0))\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_24 = case_when(aofib&gt;=24~1,\n                                                                              aofib&lt;24~0))\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_26 = case_when(aofib&gt;=26~1,\n                                                                              aofib&lt;26~0))\n\nAllMetdataFiber &lt;- mutate(AllMetdataFiber,  fiber_dichotomized_28 = case_when(aofib&gt;=28~1,\n                                                                              aofib&lt;28~0))\n\n\n###multivariable PFS\n\ncox_pfs_12_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_12 +\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_12_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_12 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized_12           -0.6214    0.5372   0.3350 -1.855   0.0636 .\nageby10                          0.2678    1.3071   0.1397  1.917   0.0553 .\necog_1to5_final                  0.3078    1.3605   0.3470  0.887   0.3751  \ncancer_RCCvsUC                   0.5491    1.7318   0.3003  1.828   0.0675 .\nstage.simplified.factorStage IV  0.5135    1.6711   1.0435  0.492   0.6227  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_12              0.5372     1.8615    0.2786     1.036\nageby10                            1.3071     0.7651    0.9940     1.719\necog_1to5_final                    1.3605     0.7350    0.6891     2.686\ncancer_RCCvsUC                     1.7318     0.5774    0.9612     3.120\nstage.simplified.factorStage IV    1.6711     0.5984    0.2161    12.920\n\nConcordance= 0.658  (se = 0.037 )\nLikelihood ratio test= 15.66  on 5 df,   p=0.008\nWald test            = 16.11  on 5 df,   p=0.007\nScore (logrank) test = 16.94  on 5 df,   p=0.005\n\ncox_pfs_14_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_14 +\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_14_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_14 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)   \nfiber_dichotomized_14           -0.7824    0.4573   0.3013 -2.597  0.00941 **\nageby10                          0.3030    1.3539   0.1437  2.108  0.03502 * \necog_1to5_final                  0.3051    1.3568   0.3377  0.904  0.36624   \ncancer_RCCvsUC                   0.5461    1.7265   0.2978  1.834  0.06670 . \nstage.simplified.factorStage IV  0.4607    1.5852   1.0403  0.443  0.65784   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_14              0.4573     2.1868    0.2534    0.8254\nageby10                            1.3539     0.7386    1.0215    1.7945\necog_1to5_final                    1.3568     0.7370    0.6999    2.6302\ncancer_RCCvsUC                     1.7265     0.5792    0.9631    3.0950\nstage.simplified.factorStage IV    1.5852     0.6308    0.2063   12.1784\n\nConcordance= 0.673  (se = 0.036 )\nLikelihood ratio test= 18.8  on 5 df,   p=0.002\nWald test            = 18.83  on 5 df,   p=0.002\nScore (logrank) test = 19.86  on 5 df,   p=0.001\n\ncox_pfs_15_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized +\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_15_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)   \nfiber_dichotomized              -0.7851    0.4561   0.2946 -2.665   0.0077 **\nageby10                          0.3098    1.3631   0.1463  2.118   0.0342 * \necog_1to5_final                  0.3067    1.3589   0.3375  0.909   0.3635   \ncancer_RCCvsUC                   0.4615    1.5864   0.2986  1.546   0.1222   \nstage.simplified.factorStage IV  0.3596    1.4327   1.0407  0.346   0.7297   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized                 0.4561     2.1925    0.2560    0.8125\nageby10                            1.3631     0.7336    1.0233    1.8157\necog_1to5_final                    1.3589     0.7359    0.7013    2.6332\ncancer_RCCvsUC                     1.5864     0.6303    0.8836    2.8482\nstage.simplified.factorStage IV    1.4327     0.6980    0.1864   11.0150\n\nConcordance= 0.675  (se = 0.036 )\nLikelihood ratio test= 19.37  on 5 df,   p=0.002\nWald test            = 19.17  on 5 df,   p=0.002\nScore (logrank) test = 20.29  on 5 df,   p=0.001\n\ncox_pfs_16_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_16 +\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_16_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_16 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized_16           -0.5223    0.5931   0.2806 -1.861   0.0627 .\nageby10                          0.2455    1.2782   0.1390  1.766   0.0773 .\necog_1to5_final                  0.3480    1.4162   0.3388  1.027   0.3044  \ncancer_RCCvsUC                   0.5542    1.7406   0.2957  1.874   0.0609 .\nstage.simplified.factorStage IV  0.3905    1.4777   1.0429  0.374   0.7081  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_16              0.5931     1.6859    0.3422     1.028\nageby10                            1.2782     0.7823    0.9734     1.678\necog_1to5_final                    1.4162     0.7061    0.7290     2.751\ncancer_RCCvsUC                     1.7406     0.5745    0.9750     3.107\nstage.simplified.factorStage IV    1.4777     0.6767    0.1914    11.410\n\nConcordance= 0.655  (se = 0.036 )\nLikelihood ratio test= 15.9  on 5 df,   p=0.007\nWald test            = 15.72  on 5 df,   p=0.008\nScore (logrank) test = 16.48  on 5 df,   p=0.006\n\ncox_pfs_18_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_18 +\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_18_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_18 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized_18           -0.4544    0.6348   0.2826 -1.608   0.1078  \nageby10                          0.2115    1.2355   0.1360  1.555   0.1200  \necog_1to5_final                  0.3425    1.4085   0.3389  1.011   0.3122  \ncancer_RCCvsUC                   0.6838    1.9815   0.2979  2.296   0.0217 *\nstage.simplified.factorStage IV  0.3985    1.4896   1.0432  0.382   0.7025  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_18              0.6348     1.5752    0.3649     1.105\nageby10                            1.2355     0.8094    0.9464     1.613\necog_1to5_final                    1.4085     0.7100    0.7249     2.736\ncancer_RCCvsUC                     1.9815     0.5047    1.1052     3.552\nstage.simplified.factorStage IV    1.4896     0.6713    0.1928    11.508\n\nConcordance= 0.646  (se = 0.035 )\nLikelihood ratio test= 15.14  on 5 df,   p=0.01\nWald test            = 14.6  on 5 df,   p=0.01\nScore (logrank) test = 15.3  on 5 df,   p=0.009\n\ncox_pfs_20_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_20 + \n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_20_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_20 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized_20           -0.2522    0.7771   0.2986 -0.845   0.3982  \nageby10                          0.2073    1.2303   0.1372  1.511   0.1308  \necog_1to5_final                  0.3824    1.4658   0.3414  1.120   0.2627  \ncancer_RCCvsUC                   0.6165    1.8525   0.2976  2.072   0.0383 *\nstage.simplified.factorStage IV  0.3653    1.4409   1.0514  0.347   0.7283  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_20              0.7771     1.2869    0.4328     1.395\nageby10                            1.2303     0.8128    0.9402     1.610\necog_1to5_final                    1.4658     0.6822    0.7507     2.862\ncancer_RCCvsUC                     1.8525     0.5398    1.0338     3.320\nstage.simplified.factorStage IV    1.4409     0.6940    0.1835    11.313\n\nConcordance= 0.647  (se = 0.036 )\nLikelihood ratio test= 13.25  on 5 df,   p=0.02\nWald test            = 13.07  on 5 df,   p=0.02\nScore (logrank) test = 13.75  on 5 df,   p=0.02\n\ncox_pfs_22_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_22 +\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_22_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_22 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized_22           -0.4063    0.6661   0.3164 -1.284   0.1992  \nageby10                          0.2241    1.2513   0.1349  1.661   0.0966 .\necog_1to5_final                  0.3573    1.4295   0.3412  1.047   0.2949  \ncancer_RCCvsUC                   0.5977    1.8180   0.2957  2.022   0.0432 *\nstage.simplified.factorStage IV  0.2869    1.3323   1.0530  0.272   0.7853  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_22              0.6661     1.5012    0.3583     1.239\nageby10                            1.2513     0.7992    0.9605     1.630\necog_1to5_final                    1.4295     0.6995    0.7325     2.790\ncancer_RCCvsUC                     1.8180     0.5501    1.0184     3.245\nstage.simplified.factorStage IV    1.3323     0.7506    0.1692    10.493\n\nConcordance= 0.645  (se = 0.037 )\nLikelihood ratio test= 14.27  on 5 df,   p=0.01\nWald test            = 13.71  on 5 df,   p=0.02\nScore (logrank) test = 14.4  on 5 df,   p=0.01\n\ncox_pfs_24_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_24 +\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_24_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_24 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized_24           -0.2554    0.7746   0.3333 -0.766   0.4435  \nageby10                          0.2174    1.2429   0.1350  1.611   0.1071  \necog_1to5_final                  0.3985    1.4896   0.3423  1.164   0.2443  \ncancer_RCCvsUC                   0.5973    1.8172   0.2974  2.008   0.0446 *\nstage.simplified.factorStage IV  0.3207    1.3781   1.0611  0.302   0.7625  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_24              0.7746     1.2909    0.4031     1.489\nageby10                            1.2429     0.8046    0.9540     1.619\necog_1to5_final                    1.4896     0.6713    0.7616     2.913\ncancer_RCCvsUC                     1.8172     0.5503    1.0145     3.255\nstage.simplified.factorStage IV    1.3781     0.7256    0.1722    11.027\n\nConcordance= 0.644  (se = 0.036 )\nLikelihood ratio test= 13.13  on 5 df,   p=0.02\nWald test            = 13.02  on 5 df,   p=0.02\nScore (logrank) test = 13.71  on 5 df,   p=0.02\n\ncox_pfs_26_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_26+\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC  + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_26_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_26 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized_26           -0.1761    0.8386   0.3764 -0.468   0.6399  \nageby10                          0.2209    1.2472   0.1350  1.637   0.1017  \necog_1to5_final                  0.4036    1.4973   0.3428  1.178   0.2390  \ncancer_RCCvsUC                   0.5852    1.7953   0.2987  1.959   0.0501 .\nstage.simplified.factorStage IV  0.3428    1.4088   1.0751  0.319   0.7499  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_26              0.8386     1.1925    0.4010     1.753\nageby10                            1.2472     0.8018    0.9573     1.625\necog_1to5_final                    1.4973     0.6679    0.7647     2.932\ncancer_RCCvsUC                     1.7953     0.5570    0.9997     3.224\nstage.simplified.factorStage IV    1.4088     0.7098    0.1713    11.588\n\nConcordance= 0.642  (se = 0.036 )\nLikelihood ratio test= 12.74  on 5 df,   p=0.03\nWald test            = 12.76  on 5 df,   p=0.03\nScore (logrank) test = 13.44  on 5 df,   p=0.02\n\ncox_pfs_28_uv &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized_28+\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor,\n                      AllMetdataFiber)\nsummary(cox_pfs_28_uv)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized_28 + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + stage.simplified.factor, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                   coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized_28           -0.1778    0.8371   0.4253 -0.418    0.676  \nageby10                          0.2174    1.2428   0.1349  1.612    0.107  \necog_1to5_final                  0.3973    1.4879   0.3430  1.158    0.247  \ncancer_RCCvsUC                   0.5827    1.7909   0.2998  1.944    0.052 .\nstage.simplified.factorStage IV  0.3370    1.4007   1.0856  0.310    0.756  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized_28              0.8371     1.1946    0.3637     1.927\nageby10                            1.2428     0.8046    0.9541     1.619\necog_1to5_final                    1.4879     0.6721    0.7597     2.914\ncancer_RCCvsUC                     1.7909     0.5584    0.9951     3.223\nstage.simplified.factorStage IV    1.4007     0.7139    0.1668    11.760\n\nConcordance= 0.644  (se = 0.037 )\nLikelihood ratio test= 12.7  on 5 df,   p=0.03\nWald test            = 12.75  on 5 df,   p=0.03\nScore (logrank) test = 13.42  on 5 df,   p=0.02\n\n#Calculating number of patients categorized as \"high fiber\" as a function of each dichotomization threshold\nsum(AllMetdataFiber$fiber_dichotomized_12) #69\n\n[1] 69\n\nsum(AllMetdataFiber$fiber_dichotomized_14) #61\n\n[1] 61\n\nsum(AllMetdataFiber$fiber_dichotomized) #56\n\n[1] 56\n\nsum(AllMetdataFiber$fiber_dichotomized_16) #51\n\n[1] 51\n\nsum(AllMetdataFiber$fiber_dichotomized_18) #40\n\n[1] 40\n\nsum(AllMetdataFiber$fiber_dichotomized_20) #30\n\n[1] 30\n\nsum(AllMetdataFiber$fiber_dichotomized_22) #26\n\n[1] 26\n\nsum(AllMetdataFiber$fiber_dichotomized_24) #21\n\n[1] 21\n\nsum(AllMetdataFiber$fiber_dichotomized_26) #16\n\n[1] 16\n\nsum(AllMetdataFiber$fiber_dichotomized_28) #13\n\n[1] 13\n\nforestplot_data &lt;- tibble::tibble(mean  = c(0.5372, 0.4573, 0.4561, 0.5931, 0.6348, 0.7771, 0.6661, 0.7746, 0.8386, 0.8371),\n                                  lower = c(0.2786, 0.2534, 0.2560, 0.3422, 0.3649, 0.4328, 0.3583, 0.4031, 0.4010, 0.3637),\n                                  upper = c(1.036, 0.8254, 0.8125,  1.028, 1.105, 1.395, 1.239, 1.489, 1.753, 1.927),\n                                  study = c(\"12\", \"14\", \"15\", \"16\", \"18\", \"20\", \"21\", \"24\", \"26\", \"28\"),\n                                  HighFiber  = c(\"69\",\"61\",\"56\",\"51\",\"40\",\"30\",\"26\",\"21\",\"16\",\"13\"),\n                                  HR = c(\"0.54\", \"0.46\", \"0.46\", \"0.59\", \"0.63\", \"0.78\",\"0.67\",\"0.77\", \"0.84\", \"0.84\"))\n\nforestplot_data |&gt;\n  forestplot(labeltext = c(study, HighFiber,HR),\n             clip = c(0.09, 2.5),\n             xlog = TRUE,\n             xlab = \"Hazard ratio for PFS (95% CI)\",\n             xticks = c(0.25,0.5,1.0,2.5),\n             title = \"Multivariable progression-free survival sensitivity analysis\",\n             boxsize = 0.5,\n             align = c(\"c\", \"c\", \"r\"),\n             txt_gp = fpTxtGp(\n               xlab = gpar(cex = 1.2),  # Increase size of the x-axis title (e.g., to 120%)\n               ticks = gpar(cex = 1.1)  # Increase size of the x-axis tick labels (e.g., to 110%)\n             )) |&gt;\n  fp_set_style(box = \"royalblue\",\n               line = \"darkblue\",\n               summary = \"royalblue\") |&gt; \n  fp_add_header(study = c(\"Fiber threshold (g/day)\"),\n                HighFiber = c(\"High-fiber patients (n)\"),\n                #n = c(\"n\"),\n                #events = c(\"Events\"),\n                HR = c(\"HR\"))\n\n\n\n\n\n\n\n#dev.copy(svg, \"svg/extended_figure_1_part_c_forest_plt.svg\")\n#dev.off()",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 1: PFS and OS by Disease Type"
    ]
  },
  {
    "objectID": "extended_data_figure_1_pfs_fiber_disease_type.html#panel-d",
    "href": "extended_data_figure_1_pfs_fiber_disease_type.html#panel-d",
    "title": "Extended Figure 1: PFS vs Fiber by Disease Type",
    "section": "Panel D",
    "text": "Panel D\nSmoothing spline for PFS as a function of avg grams of daily fiber/avg daily kCal. Each tick corresponds to a patient.\n\n#gram_fiber_per_Kcal_aboveRecommended\n\n\nmultivariate_cox_fiber_per_kCal &lt;-coxph(Surv(pfs_mo,pod_status)~ fiber_dichotomized +\n                        ageby10 + ecog_1to5_final + cancer_RCCvsUC + kcalor,\n                      AllMetdataFiber)\n\nsummary(multivariate_cox_fiber_per_kCal)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ fiber_dichotomized + \n    ageby10 + ecog_1to5_final + cancer_RCCvsUC + kcalor, data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                      coef exp(coef) se(coef)      z Pr(&gt;|z|)  \nfiber_dichotomized -0.6707    0.5114   0.3711 -1.807   0.0707 .\nageby10             0.3088    1.3617   0.1459  2.116   0.0343 *\necog_1to5_final     0.3396    1.4044   0.3324  1.022   0.3070  \ncancer_RCCvsUC      0.4522    1.5718   0.2940  1.538   0.1240  \nkcalor             -0.1398    0.8695   0.2698 -0.518   0.6042  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                   exp(coef) exp(-coef) lower .95 upper .95\nfiber_dichotomized    0.5114     1.9555    0.2471     1.058\nageby10               1.3617     0.7344    1.0231     1.813\necog_1to5_final       1.4044     0.7121    0.7321     2.694\ncancer_RCCvsUC        1.5718     0.6362    0.8834     2.797\nkcalor                0.8695     1.1501    0.5124     1.475\n\nConcordance= 0.675  (se = 0.037 )\nLikelihood ratio test= 19.52  on 5 df,   p=0.002\nWald test            = 19.31  on 5 df,   p=0.002\nScore (logrank) test = 20.28  on 5 df,   p=0.001\n\nunivariate_cox_fiber_per_kCal &lt;-coxph(Surv(pfs_mo,pod_status)~ gram_fiber_per_Kcal_aboveRecommended,\n                      AllMetdataFiber)\n\nsummary(univariate_cox_fiber_per_kCal)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ gram_fiber_per_Kcal_aboveRecommended, \n    data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n                                        coef exp(coef) se(coef)      z Pr(&gt;|z|)\ngram_fiber_per_Kcal_aboveRecommended -1.0577    0.3472   0.5208 -2.031   0.0422\n                                      \ngram_fiber_per_Kcal_aboveRecommended *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                                     exp(coef) exp(-coef) lower .95 upper .95\ngram_fiber_per_Kcal_aboveRecommended    0.3472       2.88    0.1251    0.9636\n\nConcordance= 0.553  (se = 0.025 )\nLikelihood ratio test= 5.57  on 1 df,   p=0.02\nWald test            = 4.13  on 1 df,   p=0.04\nScore (logrank) test = 4.52  on 1 df,   p=0.03\n\nunivariate_cox_fiber_per_kCal &lt;-coxph(Surv(pfs_mo,pod_status)~ aofib,\n                      AllMetdataFiber)\n\nsummary(univariate_cox_fiber_per_kCal)\n\nCall:\ncoxph(formula = Surv(pfs_mo, pod_status) ~ aofib, data = AllMetdataFiber)\n\n  n= 86, number of events= 55 \n\n          coef exp(coef) se(coef)      z Pr(&gt;|z|)  \naofib -0.03344   0.96711  0.01671 -2.001   0.0454 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n      exp(coef) exp(-coef) lower .95 upper .95\naofib    0.9671      1.034    0.9359    0.9993\n\nConcordance= 0.597  (se = 0.039 )\nLikelihood ratio test= 4.46  on 1 df,   p=0.03\nWald test            = 4  on 1 df,   p=0.05\nScore (logrank) test = 4.04  on 1 df,   p=0.04\n\np&lt;- makeSpline(AllMetdataFiber, AllMetdataFiber$pfs_mo, AllMetdataFiber$pod_status, \n           AllMetdataFiber$gram_fiber_per_Kcal,\n           xlab = \"(Average daily grams of fiber)/(Average daily kilocalories)\", ylab=\"Hazard ratio (95% CI)\",\n           title=\"Smoothing spline for progression-free survival\",\n           knots=3)\np + \n theme(\n     axis.text = element_text(size = 18), # Adjust axis labels\n     axis.title = element_text(size = 20), # Adjust axis titles\n     plot.title = element_text(size = 24),  # Adjust plot title\n     legend.text = element_text(size = 18),  # Adjust legend text\n     legend.title = element_text(size = 20), # Adjust legend titleMetronidazole\n     strip.text.x = element_text(size = 18),\n     strip.text.y = element_text(size = 18) \n ) \n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_1_part_d_spline.svg\", w=8, h = 5)",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 1: PFS and OS by Disease Type"
    ]
  },
  {
    "objectID": "extended_data_figure_3_maaslin_acoa_analysis.html",
    "href": "extended_data_figure_3_maaslin_acoa_analysis.html",
    "title": "Ext Data Fig 3 - Maaslin",
    "section": "",
    "text": "ps &lt;- readRDS(paste0(data_folder, \"/public_data/sequencing_data/plotting_phyloseq_deidentified.rds\"))\nacoa_df &lt;- readRDS(paste0(data_folder, \"/data/cleaned_data/acoa_data.rds\"))\n\nps_family &lt;- tax_glom(ps, taxrank = \"Family\")\ntax_table(ps_family)[, \"Family\"] &lt;- gsub(\"[^a-zA-Z0-9]\", \"_\", tax_table(ps_family)[, \"Family\"])\nfamily_names &lt;- make.unique(tax_table(ps_family)[, \"Family\"])\ntaxa_names(ps_family) &lt;- family_names\n# Extract feature table (transpose to samples x features)\nif (taxa_are_rows(ps_family)) {\n  feature_table &lt;- as.data.frame(t(otu_table(ps_family)))\n} else {\n  feature_table &lt;- as.data.frame(otu_table(ps_family))\n}\n\n# Extract metadata\nmetadata &lt;- sample_data(ps_family) %&gt;%\n  as.matrix() %&gt;%\n  as.data.frame() %&gt;% \n  rownames_to_column(\"tmp_row_names\") %&gt;%\n  mutate(SAMPID = as.integer(SAMPID)) %&gt;%\n  left_join(acoa_df %&gt;% select(c(pyruvate, SAMPID)), by = \"SAMPID\") %&gt;%\n  rename(acoa = pyruvate) %&gt;% \n  column_to_rownames(\"tmp_row_names\")  # Note that the \"pyruvate\" generating pathway is associated with ACOA, apologies for the inconsistent names\n  \nmetadata &lt;- metadata[match(rownames(metadata), rownames(feature_table)), ]\n\n# Check that sample names match\nstopifnot(identical(rownames(feature_table), rownames(metadata)))\n\n#output at the species level\n#raw ACoA input here since log transform is included in the maaslin algorithm\nfit_out &lt;- maaslin3(input_data = feature_table,\n                    input_metadata = metadata,\n                    output = 'maaslin_output_family_level_abundance',\n                    formula = '~ acoa',\n                    normalization = 'TSS',\n                    transform = 'LOG',\n                    max_significance = 0.1,\n                    median_comparison_abundance = TRUE,\n                    warn_prevalence = FALSE,\n                    min_abundance = 0.1,\n                    evaluate_only = 'abundance',\n                    max_pngs = 250,\n                    cores = 1)\n\n\nPanel A\nResults of Maaslin 3 run on MSKCC Cohort\n\n\n\nnew_metadata &lt;- readRDS(paste0(data_folder, \"/data/cleaned_data/wargo_phylo.rds\")) %&gt;%\n  microViz::ps_melt() %&gt;% \n  mutate(acoa = pyruvate + .001) %&gt;%\n    select(c(Sample, acoa)) %&gt;%\n  unique() %&gt;%\n  column_to_rownames(\"Sample\") %&gt;%\n  phyloseq::sample_data()\n\nps_wargo &lt;- merge_phyloseq(readRDS(paste0(data_folder, \"/data/cleaned_data/wargo_phylo.rds\")), new_metadata)\n#same for Wargo!\n# Collapse taxa to the Family level\nps_wargo_f &lt;- tax_glom(ps_wargo, taxrank = \"Family\")\n\n# Optional: keep only named families\nps_wargo_f &lt;- subset_taxa(ps_wargo_f, !is.na(Family) & Family != \"\")\n\n# Replace NAs and tidy family names\ntax_table(ps_wargo_f)[, \"Family\"] &lt;- gsub(\"[^a-zA-Z0-9]\", \"_\", tax_table(ps_wargo_f)[, \"Family\"])\nfamily_names &lt;- make.unique(tax_table(ps_wargo_f)[, \"Family\"])\ntaxa_names(ps_wargo_f) &lt;- family_names\n\n\n# Extract feature table (transpose to samples x features)\nfeature_table &lt;- as.data.frame(t(otu_table(ps_wargo_f)))\nif (taxa_are_rows(ps_wargo_f)) {\n  feature_table &lt;- as.data.frame(t(otu_table(ps_wargo_f)))\n} else {\n  feature_table &lt;- as.data.frame(otu_table(ps_wargo_f))\n}\n\n# Extract metadata\nmetadata &lt;- data.frame(sample_data(ps_wargo_f))\n\n\n# Check that sample names match\nstopifnot(identical(rownames(feature_table), rownames(metadata)))\n\n\nfit_out &lt;- maaslin3(input_data = feature_table,\n                    input_metadata = metadata,\n                    output = 'wargo_maaslin_output_family_level_abundance',\n                    formula = '~ acoa',\n                    normalization = 'TSS',\n                    transform = 'LOG',\n                    max_significance = 0.1,\n                    median_comparison_abundance = TRUE,\n                    warn_prevalence = FALSE,\n                    min_abundance = 0.1,\n                    evaluate_only = 'abundance',\n                    max_pngs = 250,\n                    cores = 1)\n\n\n\nPanel B\nResults of Maaslin 3 run on the External Validation Cohort",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 3: Maaslin Analysis"
    ]
  },
  {
    "objectID": "extended_data_figure_5_PCOA_family_and_ACOA_colors_external_melanoma_cohort.html",
    "href": "extended_data_figure_5_PCOA_family_and_ACOA_colors_external_melanoma_cohort.html",
    "title": "Extended Figure 5 Beta Diversity Analysis and the External Melanoma Cohort.",
    "section": "",
    "text": "Panel A\nPCOA of External Melanoma Cohort Samples, with points colored in by each sample’s log-scaled ACoA RPKM.\n\nps %&gt;%\n  tax_fix() %&gt;%\n  tax_transform(trans = \"compositional\", rank = \"Species\") %&gt;%\n  dist_calc(\"aitchison\") %&gt;%\n  ord_calc(\"PCoA\") %&gt;%\n  ord_plot(fill = \"log_acoa\", size = 2, shape=21, alpha=0.9,\n           plot_taxa = c(1:5)) +\n  scale_fill_gradientn(colours=c(\"#2b3f76\", \"#f0f0f0\", \"#b2182b\"), values=c(0,.7,1)) +\n  theme_classic() +  \n  scale_y_reverse() + \n  labs(\n    fill = \"Log ACoA\",\n    x = paste(\"PCoA 1 [\", pcoa_1, \"%]\"),\n    y = paste(\"PCoA 2 [\", pcoa_2, \"%]\"),\n    caption = \"\"\n  ) +\n  theme(\n    legend.position = \"None\"\n  )\n\n\n\n\n\n\n\n ggsave(\"svg/extended_figure_5_part_a_log_acoa.svg\", w=3, h = 3)\n\n\n\nPanel B\nPCOA of External Melanoma Cohort Samples, with points colored in by each sample’s log-scaled Ruminococcaceae Relative Abundance.\n\nps %&gt;%\n  tax_fix() %&gt;%\n  tax_transform(trans = \"compositional\", rank = \"Species\") %&gt;%\n  dist_calc(\"aitchison\") %&gt;%\n  ord_calc(\"PCoA\") %&gt;%\n  ord_plot(fill = \"log_rum\", size = 2, shape=21, alpha=0.9,\n           plot_taxa = c(1:5)) +\n  scale_fill_gradientn(colours=c(\"#2b3f76\", \"#f0f0f0\", \"#b2182b\"), values=c(0,.55,1)) +\n  theme_classic() +  \n  scale_y_reverse() + \n  labs(\n    fill = \"   Log\\nRel. Abund.\",\n    x = paste(\"PCoA 1 [\", pcoa_1, \"%]\"),\n    y = paste(\"PCoA 2 [\", pcoa_2, \"%]\"),\n    caption = \"\"\n  ) +\n  theme(\n    legend.position = \"None\"\n  )\n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_5_part_b_log_ruminococcaceae.svg\", w=3, h = 3)\n\n\n\nPanel C\nPCOA of External Melanoma Cohort Samples, with points colored in by each sample’s log-scaled Bacteroidaceae Relative Abundance.\n\nps %&gt;%\n  tax_fix() %&gt;%\n  tax_transform(trans = \"compositional\", rank = \"Species\") %&gt;%\n  dist_calc(\"aitchison\") %&gt;%\n  ord_calc(\"PCoA\") %&gt;%\n  ord_plot(fill = \"log_bac\", size = 2, shape=21, alpha=0.9,\n           plot_taxa = c(1:5)) +\n  scale_fill_gradientn(colours=c(\"#2b3f76\", \"#f0f0f0\", \"#b2182b\"), values=c(0,.8,1)) +\n  theme_classic() +  \n  scale_y_reverse() + \n  labs(\n    fill = \"   Log\\nRel. Abund.\",\n    x = paste(\"PCoA 1 [\", pcoa_1, \"%]\"),\n    y = paste(\"PCoA 2 [\", pcoa_2, \"%]\"),\n    caption = \"\"\n  ) + \n  theme(\n    legend.position = \"None\"\n  )\n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_5_part_c_log_Bacteroidaceae.svg\", w=3, h = 3)",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 5: External Melanoma Cohort Beta Diversity"
    ]
  },
  {
    "objectID": "extended_data_figure_7_time_bin_analysis.html",
    "href": "extended_data_figure_7_time_bin_analysis.html",
    "title": "Extended Figure 7 - Time Bin Sensitivity Analysis",
    "section": "",
    "text": "Panel A\n\nggplot(diversity_df, aes(x=tmpt_labels_f, y =Inverse_Simpson, fill = tmpt_labels_f)) +\n  geom_boxplot() +\n  scale_y_log10() +\n  theme_classic() +\n  labs(x = \"Days relative to initiation of treatment\", y = \"Alpha diversity\\n(1/Simpson)\") +\n  theme(axis.text = element_text(size=12), \n        text = element_text(size=12),\n        legend.position = \"none\") +\n theme(\n     axis.text = element_text(size = 20), # Adjust axis labels\n     axis.title = element_text(size = 24), # Adjust axis titles\n     plot.title = element_text(size = 24),  # Adjust plot title\n     legend.text = element_text(size = 18),  # Adjust legend text\n     legend.title = element_text(size = 20), # Adjust legend titleMetronidazole\n     strip.text.x = element_text(size = 20),\n     strip.text.y = element_text(size = 20) \n ) + \ntheme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_7_part_a_alpha_diversity_bins.svg\", w = 8, h = 4)\n\n\n\nPanel B\n\nggplot(diversity_df, aes(\n    x = PCoA1,\n    y = PCoA2,\n    color = tmpt_cut,\n    shape = prepost_label)) +\n  geom_point(size = 3) +\n  annotate(\"text\", x = .2, y = .3, label = paste(\"Permanova\\nPre vs Post, p =\", adonis_pval), color = \"black\", size = 4) +\n  scale_color_brewer(palette=\"RdBu\") +\n  labs(\n    title = \"β-Diversity (Bray-Curis distance) by relative\\nday of sample collection.\",\n    x = paste0(\"PCoA1 [\", explained_pc1, \"%]\"),\n    y = paste0(\"PCoA2 [\", explained_pc2, \"%]\"),\n    color = \"Time window\\nrelative to\\ninitiation of\\ntreatment\",\n    shape = \"\") +\n  theme_minimal() +\n theme(\n     axis.text = element_text(size = 20), # Adjust axis labels\n     axis.title = element_text(size = 24), # Adjust axis titles\n     plot.title = element_text(size = 24),  # Adjust plot title\n     legend.text = element_text(size = 18),  # Adjust legend text\n     legend.title = element_text(size = 20), # Adjust legend titleMetronidazole\n     strip.text.x = element_text(size = 20),\n     strip.text.y = element_text(size = 20) \n ) \n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_7_part_b_beta_diversity.svg\", w = 7.6, h = 5.5)\n\n\n\nPanel C\n\nget_spline_data &lt;- function(data_df, use_500 = F){\n  model_spline_os &lt;- coxph(Surv(tt_os_d, event_os)~rcs(pyruvate,4)+age10+strata(cohort)+ecog, data_df)\n  ptemp &lt;- termplot(model_spline_os, se=T, plot=F)\n  buterm &lt;- ptemp$pyruvate\n  if(use_500){\n    closest_to_500_index &lt;- which.min(abs(buterm$x - 500))\n    center &lt;- buterm$y[closest_to_500_index]\n  }else{\n    center &lt;- buterm$y[which(buterm$y == median(buterm$y))]\n  }\n  ytemp &lt;- buterm$y + outer(buterm$se, c(0, -1.96, 1.96), '*')\n  exp_ytemp &lt;- exp(ytemp - center)\n\n  spline_data &lt;- data.frame(buty = buterm$x, Estimate = exp_ytemp[,1],\n                          Lower = exp_ytemp[,2], Upper = exp_ytemp[,3])\n  return(spline_data)\n  \n}\n\nmsk_df_pre &lt;- msk_df %&gt;% filter(TMPT &lt;= 0)\nmsk_df_preplus &lt;- msk_df %&gt;% filter(TMPT &lt;= 5)\n\n\nspline_data_all &lt;- get_spline_data(msk_df)\nspline_data_pre &lt;- get_spline_data(msk_df_pre)\nspline_data_preplus &lt;- get_spline_data(msk_df_preplus, use_500 = T)\n\nggplot()+\n  geom_ribbon(data=spline_data_all, aes(x=buty, ymin = Lower, ymax = Upper), fill = \"grey80\", alpha = 0.5) +\n  geom_ribbon(data=spline_data_preplus, aes(x=buty, ymin = Lower, ymax = Upper), fill = \"pink\", alpha = 0.5, lty=2) +\n  #geom_ribbon(data=spline_data_pre, aes(x=buty, ymin = Lower, ymax = Upper), fill = \"lightblue\", alpha = 0.25) +\n  geom_line(data=spline_data_all, aes(x=buty, y = Estimate), color = \"blue\") +\n  geom_line(data=spline_data_preplus, aes(x=buty, y = Estimate), color = \"red\", lty=2) +\n  geom_line(data=spline_data_pre, aes(x=buty, y = Estimate), color = \"darkgreen\", lty=2.5) +\n\n  geom_rug(data=spline_data_all, aes(x=buty), sides = \"b\") +  # Add rug plot at the bottom ('b') of the plot\n  geom_rug(data=spline_data_preplus, aes(x=buty), sides = \"b\", color=\"red\", alpha=0.5) +  # Add rug plot at the bottom ('b') of the plot\n  geom_rug(data=spline_data_pre, aes(x=buty), sides = \"b\", color=\"darkgreen\", alpha=0.5) +\n  annotate(\"text\", x = 1650, y = 1.6, label = paste0(\"All samples (n=\", nrow(msk_df), \")\"), color = \"black\", size = 5) +\n  annotate(\"text\", x = 1300, y = .6, label = paste0(\"Day ≤ 5 (n=\", nrow(msk_df_preplus), \")\"), color = \"black\", size = 5) +\n  annotate(\"text\", x = 1420, y = .02, label = paste0(\"Day ≤ 0 only (n=\", nrow(msk_df_pre), \")\"), color = \"black\", size =5) +\n  scale_y_log10() +  # Log scale for y-axis\n  labs(\n    x = \"ACoA-pathway genes present\",\n    y = \"Hazard ratio\",\n    title = \"Sensitivity analysis - day of sample collection relative to start of therapy\") +\n  theme_minimal() +\n  theme(text = element_text(size=20),\n        title = element_blank())\n\n\n\n\n\n\n\nggsave(\"svg/extended_figure_7_part_c_sensitivity_time.svg\", w = 8, h = 4)",
    "crumbs": [
      "Extended Figures",
      "Extended Figure 7: Time Bin Sensitivity Analysis"
    ]
  },
  {
    "objectID": "figure_2_acoa_pathway_icb_outcome.html",
    "href": "figure_2_acoa_pathway_icb_outcome.html",
    "title": " Figure 2 - Butyrate Production Capacity from ACoA Pathway and ICB outcome",
    "section": "",
    "text": "Here are the column names of the data we are plotting:\nfouraminobutyrate, glutarate, lysine and pyruvate represent different parts of the butyrate synthesis pathway.\n\n\n [1] \"blinded_subject_id\"    \"id_int\"                \"cohort\"               \n [4] \"age\"                   \"impact_tmb_score\"      \"cpb_drug\"             \n [7] \"ecog\"                  \"best_overall_response\" \"tt_pfs_d\"             \n[10] \"pfs_event\"             \"tt_os_d\"               \"event_os\"             \n[13] \"TMPT\"                  \"WMS_SGPID\"             \"SAMPID\"               \n[16] \"total\"                 \"samp_id\"               \"identifier.y\"         \n[19] \"Shannon\"               \"tx\"                    \"age10\"                \n[22] \"med_buty\"              \"fouraminobutyrate\"     \"gluatarate\"           \n[25] \"lysine\"                \"pyruvate\"              \"log_acoa\"             \n\n\n\nPanel A\nSurvival in Mixed Solid Tumor Cohort (n = 147) by ACoA pathway gene abundance in stool above/below the median.\nFirst for overall survival (OS):\n\n# cut the distribution of pyruvate into above/below median:\nacoa_df &lt;- acoa_df %&gt;%\n  mutate(med_p = cut(pyruvate, quantile(pyruvate, probs=seq(0,1,0.5)), c(\"Below Median\", \"Above Median\"))) %&gt;% #ifelse(pyruvate &gt; median(pyruvate, na.rm = T), \"Above Median\", \"Below Median\")) %&gt;%\n  mutate(tt_os_months = tt_os_d/30.44) %&gt;%\n  mutate(tt_pfs_months = tt_pfs_d/30.44) %&gt;%\n  arrange(med_p)\n\nfit&lt;- survfit(Surv(tt_os_months, event_os) ~ med_p, data = acoa_df)\nnames(fit$strata) &lt;- gsub(\"med_p=\", \"\", names(fit$strata))\np &lt;- ggsurvplot(fit,  size = 1,  # change line size\n           linetype = \"solid\", # use solid line\n           break.time.by = 12, # break time axis by 12 months\n           palette = c(\"aquamarine4\", \"coral4\"), # custom color palette\n           conf.int = TRUE, # Add confidence interval\n           pval = TRUE, # Add p-value,\n           legend.title=\"\",\n           risk.table = TRUE, risk.table.y.text.col = TRUE,\n           ylab = \"Survival %\",\n           xlab = \"Time (Months)\",\n           xlim = c(0,48)\n           ) \nprint(p)\n\n\n\n\n\n\n\n\nThen looking at Progression Free Survival (PFS) instead of OS:\n\nfit&lt;- survfit(Surv(tt_pfs_months, pfs_event) ~ med_p, data = acoa_df)\nnames(fit$strata) &lt;- gsub(\"med_p=\", \"\", names(fit$strata))\np &lt;- ggsurvplot(fit,  size = 1,  # change line size\n           linetype = \"solid\", # use solid line\n           break.time.by = 12, # break time axis by 12 months\n           palette = c(\"aquamarine4\", \"coral4\"), # custom color palette\n           conf.int = TRUE, # Add confidence interval\n           pval = TRUE, # Add p-value,\n           legend.title=\"\",\n           risk.table = TRUE, risk.table.y.text.col = TRUE,\n           ylab = \"Survival %\",\n           xlab = \"Time (Months)\",\n           xlim = c(0,48)\n           ) \nprint(p)\n\n\n\n\n\n\n\n\n\n\nPanel B\nRestricted cubic spline for Observational cohort adjusted for age, diagnosis, and performance status identifies increasing hazard of overall mortality associated with below-median (&lt;504 RPKM) ACoA pathway gene abundance among ICB recipients. Ticks along the x-axis reflect individual samples.\n\nmodel_spline_os &lt;- coxph(Surv(tt_os_d, event_os) ~ rms::rcs(pyruvate,4) + age10 + factor(cohort) + ecog, acoa_df)\nptemp &lt;- termplot(model_spline_os, se=T, plot=F)\nbuterm &lt;- ptemp$pyruvate\ncenter &lt;- buterm$y[which(buterm$y == median(buterm$y))]\nytemp &lt;- buterm$y + outer(buterm$se, c(0, -1.96, 1.96), '*')\nexp_ytemp &lt;- exp(ytemp - center)\n\nspline_data &lt;- data.frame(buty = buterm$x, Estimate = exp_ytemp[,1],\n                          Lower = exp_ytemp[,2], Upper = exp_ytemp[,3])\n\nggplot(spline_data, aes(x = buty)) +\n  geom_ribbon(aes(ymin = Lower, ymax = Upper), fill = \"grey80\", alpha = 0.5) +\n  geom_line(aes(y = Estimate), color = \"blue\") +\n  geom_rug(sides = \"b\") +  # Add rug plot at the bottom ('b') of the plot\n  scale_y_log10() +  # Log scale for y-axis\n  labs(x = \"Pyruvate-pathway genes present\", y = \"Hazard ratio\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\nWe will now plot some microbiome data, using a phyloseq object that contains our sequencing data. This object contains a list of the taxonomy of organisms identified, the abundance in each sample, and any associated sample specific metadata in one object.\nPrincipal components analysis (PCA) of Observational cohort sample (n = 147, 1 per patient) taxonomic abundance grouped at the family level shows increasing ACoA-pathway gene abundance from left to right along the first principal component (x-axis). Each point represents a single fecal sample. PCA loading vectors (arrows) identify increasing Ruminococcaceae and Lachnospiraceae abundance in the direction corresponding to increased ACoA-pathway gene abundance, versus greater Bacteroidales abundance (grouped at the order level) in the direction of decreased ACoA-pathway gene presence.\n\n\nPanel C\nFirst looking at how log ACOA distribution looks superimposed over the PCOA of Stool Samples:\n\nps %&gt;%\n  ps_filter(SAMPID %in% acoa_df$SAMPID) %&gt;%\n  tax_fix() %&gt;%\n  tax_transform(trans = \"compositional\", rank = \"Species\") %&gt;%\n  dist_calc(\"aitchison\") %&gt;%\n  ord_calc(\"PCoA\") %&gt;%\n  ord_plot(fill = \"log_acoa\", size = 4, shape=21, alpha=0.6,\n           plot_taxa = c(1:5)) +\n  scale_fill_gradientn(colours=c(\"#2b3f76\", \"#f0f0f0\", \"#b2182b\"), values=c(0, 0.5, 1)) +\n  theme_classic(base_size = 16) +  \n  scale_x_reverse() + \n  labs(\n    fill = \"Log ACOA\"\n  )\n\n\n\n\n\n\n\n\nNext looking at Ruminococcaeceae:\n\nrum_ps &lt;- ps\nsample_data(rum_ps)$log_rum = log10(as.numeric(sample_data(ps)$Ruminococcaceae) + 0.0001)\nrum_ps %&gt;%\n  ps_filter(SAMPID %in% acoa_df$SAMPID) %&gt;%\n  tax_fix() %&gt;%\n  tax_transform(trans = \"compositional\", rank = \"Species\") %&gt;%\n  dist_calc(\"aitchison\") %&gt;%\n  ord_calc(\"PCoA\") %&gt;%\n  ord_plot(fill = \"log_rum\", size = 4, shape=21, alpha=0.6,\n           plot_taxa = c(1:5)) +\n  scale_fill_gradientn(colours=c(\"#2b3f76\", \"#f0f0f0\", \"#b2182b\"), values=c(0, 0.65, 1)) +\n  theme_classic(base_size = 16) + \n  scale_x_reverse() + \n  labs(\n    fill = \"Log10 Rel Abund.\\nRuminococcaceae\"\n  )\n\n\n\n\n\n\n\n\nLastly looking at Bacteroidaceae:\n\nbac_ps &lt;- ps\nsample_data(bac_ps)$log_bac = log10(as.numeric(sample_data(ps)$Bacteroidaceae) + 0.0001)\nbac_ps %&gt;%\n  ps_filter(SAMPID %in% acoa_df$SAMPID) %&gt;%\n  tax_fix() %&gt;%\n  tax_transform(trans = \"compositional\", rank = \"Species\") %&gt;%\n  dist_calc(\"aitchison\") %&gt;%\n  ord_calc(\"PCoA\") %&gt;%\n  ord_plot(fill = \"log_bac\", size = 4, shape=21, alpha=0.6,\n           plot_taxa = c(1:5)) +\n  scale_fill_gradientn(colours=c(\"#2b3f76\", \"#f0f0f0\", \"#b2182b\"), values=c(0, 0.75, 1)) +\n  theme_classic(base_size = 16) + \n  scale_x_reverse() + \n  labs(\n    fill = \"Log10 Rel Abund.\\nBacteroidaceae\"\n  )\n\n\n\n\n\n\n\n\n\n\nPanel D\nACoA-pathway gene abundance was associated with response to ICB among patients with advanced renal cell cancer receiving ipilimumab plus nivolumab in the External Renal Cancer Cohort (n = 39).\n\ncoh_base_ni &lt;- readRDS(\"../data/coh_butyrate.rds\")\n\n#Figure 2D\nggplot(coh_base_ni, aes(x = response, y = pyruvate)) +\n  geom_boxplot(width = 0.4, outlier.shape = NA, linewidth = 0.6, color = \"black\") +\n  geom_jitter(aes(fill = response), shape = 21, width = 0.15, size = 5, stroke = 0.3, color = \"black\", alpha = 0.7) +\n  scale_fill_manual(values = c(\"#999999\", \"#E69F00\")) +\n  scale_x_discrete(labels = c(\"Non-responder\", \"Responder\")) +\n  theme_classic(base_size = 16) +\n  theme(\n    legend.position = \"none\",\n    axis.line = element_line(color = \"black\", linewidth = 0.5),\n    axis.ticks = element_line(color = \"black\", linewidth = 0.5)\n  ) +\n  xlab(\"\") +\n  ylab(\"ACoA pathway gene abundance (RPKM)\")\n\n\n\n\n\n\n\nwilcox.test(coh_base_ni$pyruvate ~ coh_base_ni$response)\n\n\n    Wilcoxon rank sum exact test\n\ndata:  coh_base_ni$pyruvate by coh_base_ni$response\nW = 36, p-value = 0.002129\nalternative hypothesis: true location shift is not equal to 0\n\ngroup_n &lt;- coh_base_ni %&gt;% count(response)\nprint(group_n)\n\n# A tibble: 2 × 2\n  response     n\n  &lt;chr&gt;    &lt;int&gt;\n1 N           16\n2 Y           13\n\n#adjusted for CMB588\nsummary(glm(response01 ~ log1p(pyruvate) + cbm588, data = coh_base_ni , family = binomial(link = \"logit\")))\n\n\nCall:\nglm(formula = response01 ~ log1p(pyruvate) + cbm588, family = binomial(link = \"logit\"), \n    data = coh_base_ni)\n\nCoefficients:\n                Estimate Std. Error z value Pr(&gt;|z|)  \n(Intercept)      -15.157      7.325  -2.069   0.0385 *\nlog1p(pyruvate)    2.491      1.160   2.148   0.0318 *\ncbm588no-CBM      -1.439      1.022  -1.407   0.1593  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 39.892  on 28  degrees of freedom\nResidual deviance: 26.776  on 26  degrees of freedom\nAIC: 32.776\n\nNumber of Fisher Scoring iterations: 6\n\n\n\n\nPanel E\nUnivariate Cox regression analyses PFS relationship to ACoA gene abundance in external cohort.\n\nwargo_surv_df &lt;- readRDS(\"../data/cleaned_data/wargo_pfs_data_for_univariate_model.RDS\")\n\n\nmodel1_wargo &lt;- coxph(Surv(pfs_d, pfsevent)~log(rum), wargo_surv_df)\nmodel2_wargo &lt;- coxph(Surv(pfs_d, pfsevent)~log(rum_lach), wargo_surv_df)\nmodel3_wargo &lt;- coxph(Surv(pfs_d, pfsevent)~log(clostridiales), wargo_surv_df)\nmodel4_wargo &lt;- coxph(Surv(pfs_d, pfsevent)~log(clostridia), wargo_surv_df)\nmodel5_wargo &lt;- coxph(Surv(pfs_d, pfsevent)~log(eval(faecalibacterium_prausnitzii+1e-7)), wargo_surv_df)\nmodel6_wargo &lt;- coxph(Surv(pfs_d, pfsevent)~log1p(pyruvate), wargo_surv_df)\n\n\nmodels &lt;- list(model1_wargo, model2_wargo, model3_wargo, model4_wargo, model5_wargo, model6_wargo)\n\n\n\nresults_df &lt;- data.frame()\n\n\nfor (i in seq_along(models)) {\n  model &lt;- models[[i]]\n  summary_model &lt;- summary(model)\n\n\n  hr &lt;- summary_model$coefficients[, \"exp(coef)\"]\n  lower_ci &lt;- summary_model$conf.int[, \"lower .95\"]\n  upper_ci &lt;- summary_model$conf.int[, \"upper .95\"]\n  pvalue &lt;- summary_model$coefficients[, \"Pr(&gt;|z|)\"]\n\n\n  results_df &lt;- rbind(results_df, data.frame(\n    Model = paste0(\"model\", i),\n    HR = hr,\n    Lower_CI = lower_ci,\n    Upper_CI = upper_ci,\n    pvalue = pvalue\n  ))\n}\n\nresults_df$source = rep(\"wargo\", 6)\nresults_df$modelname = c(\"log(Ruminococcaceae)\", \"log(Ruminococcacaeae + Lachnospiraceae)\",\n                             \"log(Clostridiales)\", \"log(Clostridia)\", \"log(F prausnitizii + 1e-7)\", \"log(ACoA\")\n\n\nggplot(results_df) +\n  geom_point(aes(y=fct_rev(fct_reorder(modelname, HR)), x=HR)) +\n  geom_errorbarh(aes(y=fct_rev(fct_reorder(modelname, HR)), xmin=Lower_CI, xmax=Upper_CI), height=0.5)+\n  geom_vline(xintercept=1, lty=2, col=\"gray70\") +\n  scale_x_continuous(trans=\"log\") +\n  theme_classic() +\n  labs(title = \"HR (95% CI) univariable Cox\",\n       subtitle =\"\", y=\"Variable\", x=\"HR\")\n\n\n\n\n\n\n\n\n\nPanel E MSK Data\n\nUnivariate Cox regression analyses PFS relationship to ACoA gene abundance in MSK Observational Data.\n\nmsk_df &lt;- readRDS(\"../data/cleaned_data/interal_msk_data_for_univariate_model.RDS\")\n\nmodel1_msk &lt;- coxph(Surv(tt_pfs_d, pfs_event)~log(rum), msk_df)\nmodel2_msk &lt;- coxph(Surv(tt_pfs_d, pfs_event)~log(rum_lach), msk_df)\nmodel3_msk &lt;- coxph(Surv(tt_pfs_d, pfs_event)~log(clostridiales), msk_df)\nmodel4_msk &lt;- coxph(Surv(tt_pfs_d, pfs_event)~log(clostridia), msk_df)\nmodel5_msk &lt;- coxph(Surv(tt_pfs_d, pfs_event)~log(eval(faecalibacterium_prausnitzii+1e-4)), msk_df)\nmodel6_msk &lt;- coxph(Surv(tt_pfs_d, pfs_event)~log1p(pyruvate), msk_df)\n\n\nmodels &lt;- list(model1_msk, model2_msk, model3_msk, model4_msk, model5_msk, model6_msk)\n\n\n\nresults_df &lt;- data.frame()\n\n\nfor (i in seq_along(models)) {\n  model &lt;- models[[i]]\n  summary_model &lt;- summary(model)\n\n\n  hr &lt;- summary_model$coefficients[, \"exp(coef)\"]\n  lower_ci &lt;- summary_model$conf.int[, \"lower .95\"]\n  upper_ci &lt;- summary_model$conf.int[, \"upper .95\"]\n  pvalue &lt;- summary_model$coefficients[, \"Pr(&gt;|z|)\"]\n\n\n  results_df &lt;- rbind(results_df, data.frame(\n    Model = paste0(\"model\", i),\n    HR = hr,\n    Lower_CI = lower_ci,\n    Upper_CI = upper_ci,\n    pvalue = pvalue\n  ))\n}\n\nresults_df$source = rep(\"msk\", 6)\nresults_df$modelname = c(\"log(Ruminococcaceae)\", \"log(Ruminococcacaeae + Lachnospiraceae)\",\n                             \"log(Clostridiales)\", \"log(Clostridia)\", \"log(F prausnitizii + 1e-7)\", \"log(ACoA\")\n\n\nggplot(results_df) +\n  geom_point(aes(y=fct_rev(fct_reorder(modelname, HR)), x=HR)) +\n  geom_errorbarh(aes(y=fct_rev(fct_reorder(modelname, HR)), xmin=Lower_CI, xmax=Upper_CI), height=0.5)+\n  geom_vline(xintercept=1, lty=2, col=\"gray70\") +\n  scale_x_continuous(trans=\"log\") +\n  theme_classic() +\n  labs(title = \"HR (95% CI) univariable Cox\",\n       subtitle =\"\", y=\"Variable\", x=\"HR\")",
    "crumbs": [
      "Main Figures",
      "Figure 2: ACoA Pathway and ICB/Survival Outcomes"
    ]
  },
  {
    "objectID": "rebuttal_only_figure_survival_scatterplot.html",
    "href": "rebuttal_only_figure_survival_scatterplot.html",
    "title": " Figure 2 - Butyrate Production Capacity from ACoA Pathway and ICB outcome",
    "section": "",
    "text": "Because scatterplots cannot account for time spent at risk for the outcome, which is a duration more than a discrete point in time, nor for censoring. For these reasons, we feel it would be more statistically rigorous to analyze and plot time-dependent outcomes using hazard ratios, splines, and Kaplan-Meier plots. We generated thse plots as part of a rebuttal letter.\n\nmsk_df %&gt;%\n  mutate(Status = os_status) %&gt;%\n  ggplot(aes(x = pyruvate, y = time_os_months, color = Status, shape = Status)) +\n  geom_point(size = 3) +\n  scale_color_manual(values = my_palette) +\n  theme_minimal() +\n  labs(\n    x = \"ACoA pathway gene abundance, RPKM\",\n    y = \"OS months\",\n  ) +\n  theme(text = element_text(size = 16))\n\n\n\n\n\n\n\n\n\nmsk_df %&gt;%\n  mutate(Status = pfs_status) %&gt;%\n  filter(!is.na(Status)) %&gt;%\n  ggplot(aes(x = pyruvate, y = time_pfs_months, color = Status, shape = Status)) +\n  geom_point(size = 3) +\n  scale_color_manual(values = my_palette) +\n  theme_minimal() +\n  labs(\n    x = \"ACoA pathway gene abundance, RPKM\",\n    y = \"PFS months\",\n  )+\n  theme(text = element_text(size = 16))"
  }
]